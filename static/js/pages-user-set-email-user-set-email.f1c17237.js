(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-set-email-user-set-email"],{"24bc":function(t,e,n){"use strict";(function(t){var a=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("96cf");var i=a(n("1da1")),r=a(n("5530")),o=n("26cb"),s=n("b750"),u={computed:(0,r.default)({},(0,o.mapState)(["userInfo"])),data:function(){return{email:"",password:"",disabled:!0,loading:!1,codetime:0}},mounted:function(){this.userInfo&&(this.email=this.userInfo.email)},watch:{email:function(t){this.change()},password:function(t){this.change()}},methods:{change:function(){this.email&&this.password?this.disabled=!1:this.disabled=!0},getCheckNum:function(){var e=this;return(0,i.default)(regeneratorRuntime.mark((function n(){var a,i,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!(e.codetime>0)){n.next=2;break}return n.abrupt("return");case 2:if(a=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/,a.test(e.email)){n.next=6;break}return uni.showToast({title:"请输入正确邮箱格式",icon:"none"}),n.abrupt("return",!1);case 6:return n.next=8,(0,s.getEmailCode)(e.email);case 8:i=n.sent,t("log",i," at pages/user-set-email/user-set-email.vue:75"),e.codetime=60,r=setInterval((function(){e.codetime--,e.codetime<1&&(clearInterval(r),e.codetime=0)}),1e3);case 12:case"end":return n.stop()}}),n)})))()},check:function(){if(!this.email||""===this.email)return uni.showToast({title:"邮箱不能为空",icon:"none"}),!1;var t=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;return t.test(this.email)?!(!this.password||""===this.password)||(uni.showToast({title:"密码不能为空",icon:"none"}),!1):(uni.showToast({title:"请输入正确邮箱格式",icon:"none"}),!1)},submit:function(){var t=this;return(0,i.default)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.loading=!0,t.disabled=!0,t.check()){e.next=6;break}return t.loading=!1,t.disabled=!1,e.abrupt("return");case 6:return e.next=8,(0,s.bindEmail)({email:t.email,code:t.password});case 8:if(n=e.sent,0!==n.code){e.next=14;break}uni.showToast({title:"邮箱绑定成功",icon:"success"}),uni.navigateBack({delta:1}),e.next=16;break;case 14:return uni.showToast({title:"邮箱绑定失败",icon:"success"}),e.abrupt("return");case 16:t.loading=!1,t.disabled=!1;case 18:case"end":return e.stop()}}),e)})))()}}};e.default=u}).call(this,n("0de9")["log"])},3977:function(t,e,n){"use strict";n.r(e);var a=n("24bc"),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a},"58a0":function(t,e,n){"use strict";var a=n("e8e6"),i=n.n(a);i.a},6320:function(t,e,n){"use strict";n.r(e);var a=n("f8fa"),i=n("3977");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("58a0");var o,s=n("f0c5"),u=Object(s["a"])(i["default"],a["b"],a["c"],!1,null,"9522f8fc",null,!1,a["a"],o);e["default"]=u.exports},b750:function(t,e,n){"use strict";var a=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.getEmailCode=e.bindEmail=void 0,n("96cf");var i=a(n("1da1")),r=a(n("9150")),o=n("2a83"),s=function(){var t=(0,i.default)(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r.default.post("user/email",e,o.headerForm);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();e.bindEmail=s;var u=function(){var t=(0,i.default)(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r.default.post("user/email",{email:e},o.headerForm);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();e.getEmailCode=u},bf6a:function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,'/* 公共按钮 */.user-set-btn[data-v-9522f8fc]{width:100%;margin:%?20?% 0;background:#ffe933!important;border:0!important;color:#333!important}.user-set-btn-disable[data-v-9522f8fc]{background:#f4f4f4!important;border:%?1?% solid #eee!important;color:#909090!important}.body[data-v-9522f8fc]{padding:0 %?20?%!important}.common-input[data-v-9522f8fc]{font-size:%?30?%;border-bottom:%?1?% solid #f4f4f4}.login-font-color[data-v-9522f8fc]{color:#bbb}.login-padding[data-v-9522f8fc]{padding:%?20?% 0}.icon-guanbi[data-v-9522f8fc]{position:fixed;top:%?60?%;left:%?30?%;font-size:%?40?%;font-weight:700;color:#332f0a;z-index:100}.loginhead[data-v-9522f8fc]{width:100%}.other-login-title[data-v-9522f8fc]{position:relative}.other-login-title[data-v-9522f8fc]:before,.other-login-title[data-v-9522f8fc]:after{content:"";position:absolute;background:#bbb;height:%?1?%;width:%?100?%;top:50%}.other-login-title[data-v-9522f8fc]:before{left:25%}.other-login-title[data-v-9522f8fc]:after{right:25%}.login-input-box[data-v-9522f8fc]{position:relative}.login-input-box .forget-input[data-v-9522f8fc]{padding-right:%?150?%}.login-input-box .forget[data-v-9522f8fc],.login-input-box .phone[data-v-9522f8fc]{position:absolute;top:0;height:100%;z-index:100}.login-input-box .forget[data-v-9522f8fc]{width:%?150?%;right:0}.login-input-box .phone[data-v-9522f8fc]{width:%?100?%;left:0;font-weight:700}.login-input-box .phone-input[data-v-9522f8fc]{padding-left:%?100?%}.yanzhengma uni-view[data-v-9522f8fc]{background:#eee;border-radius:%?10?%;font-size:%?25?%;width:%?150?%;padding:%?10?% 0}',""]),t.exports=e},e8e6:function(t,e,n){var a=n("bf6a");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("3ffed684",a,!0,{sourceMap:!1,shadowMode:!1})},f8fa:function(t,e,n){"use strict";var a;n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return a}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"body"},[n("v-uni-input",{staticClass:"uni-input common-input",attrs:{type:"text",placeholder:"输入需要绑定的邮箱"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),n("v-uni-view",{staticClass:"login-input-box"},[n("v-uni-input",{staticClass:"uni-input common-input forget-input",attrs:{type:"text",placeholder:"请输入验证码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),n("v-uni-view",{staticClass:"forget u-f-ajc login-font-color yanzhengma",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getCheckNum.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"u-f-ajc"},[t._v(t._s(t.codetime?t.codetime+" s":"获取验证码"))])],1)],1),n("v-uni-button",{staticClass:"user-set-btn",class:{"user-set-btn-disable":t.disabled},attrs:{loading:t.loading,type:"primary",disabled:t.disabled},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}},[t._v("完成")])],1)},r=[]}}]);