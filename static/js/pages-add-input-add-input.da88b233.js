(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-add-input-add-input"],{"27c0":function(t,e,i){"use strict";var a=i("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.addTopic=e.uploudFile=e.getCategory=void 0,i("96cf");var n=a(i("1da1")),d=a(i("4622")),o=function(){var t=(0,n.default)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d.default.get("category/list");case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();e.getCategory=o;var r=function(){var t=(0,n.default)(regeneratorRuntime.mark((function t(e){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d.default.uploudFile("upload/cloud",e);case 2:return i=t.sent,t.abrupt("return",i);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();e.uploudFile=r;var c=function(){var t=(0,n.default)(regeneratorRuntime.mark((function t(e){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,d.default.post("topic",e);case 2:return i=t.sent,t.abrupt("return",i);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();e.addTopic=c},"3c0f":function(t,e,i){"use strict";(function(t){var a=i("4ea4");i("2ca0"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("96cf");var n=a(i("1da1")),d=a(i("5530")),o=i("26cb"),r=i("27c0"),c=i("13b4"),s={data:function(){return{imageData:[],serverUrl:c.baseUrl+"upload/cloud",text:"",top:0,opcity:0,scrollTop:.5,placeholder:"sssxxx",titleClass:""}},computed:(0,d.default)({},(0,o.mapState)(["userInfo","selTitle","category"])),methods:(0,d.default)((0,d.default)({},(0,o.mapMutations)(["delSelTitle","resetSelTitle","delCategory"])),{},{result:function(e){t("log",e," at pages/add-input/add-input.vue:74"),this.imageData=e.imgArr},remove:function(t){t.index},initNavigation:function(t){this.opcity=t.opcity,this.top=t.top},opcityChange:function(t){this.opcity=t.opcity},back:function(){uni.navigateBack()},inputChange:function(e){this.text=e.detail.value,t("log",this.text," at pages/add-input/add-input.vue:94")},skipToSearch:function(e){t("log",e," at pages/add-input/add-input.vue:97"),this.$http.href("../../pages/search/search")},selTopicClass:function(){this.$http.href("../select-category/select-category?topic=1")},delTitleClass:function(){this.delCategory()},selTitleHandle:function(){this.$http.href("../select-title/select-title")},submit:function(){var e=this;return(0,n.default)(regeneratorRuntime.mark((function i(){var a,n;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(t("log","发布"," at pages/add-input/add-input.vue:111"),""!==e.text||0!==e.imageData.length){i.next=4;break}return e.$http.toast("内容为空！"),i.abrupt("return");case 4:return e.userInfo.id||e.$http.href("../login/login"),a=[],e.selTitle.id&&a.push(e.selTitle.id),i.next=9,(0,r.addTopic)({uid:e.userInfo.id,cid:e.category.id?e.category.id:0,title:e.text,urlType:"img",images:e.imageData.join(",").startsWith("http")?e.imageData.join(","):"",ids:a});case 9:n=i.sent,t("log",n," at pages/add-input/add-input.vue:131"),0===n.code?(e.resetSelTitle(),uni.showToast({title:"发表成功",icon:"success",duration:200,success:function(){e.text="",e.imageData.length=0,uni.switchTab({url:"../index/index"})}})):uni.showToast({title:"发表失败,请重试！",icon:"none",duration:200,success:function(){}});case 12:case"end":return i.stop()}}),i)})))()}}),onPageScroll:function(t){this.scrollTop=t.scrollTop}};e.default=s}).call(this,i("0de9")["log"])},5115:function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return d})),i.d(e,"a",(function(){return a}));var a={tuiNavigationBar:i("cad2").default,tuiIcon:i("3e6d").default,tuiUpload:i("a404").default},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"container"},[i("tui-navigation-bar",{attrs:{backgroundColor:"255,255,255",isFixed:!1,isOpcity:!1}},[i("v-uni-view",{staticClass:"tui-content-box"},[i("v-uni-view",{staticClass:"tui-avatar-box",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.back.apply(void 0,arguments)}}},[i("tui-icon",{attrs:{name:"back",color:"#FFE933",size:64}})],1),i("v-uni-view",{staticClass:"tui-search-box"},[i("v-uni-view",{staticClass:"tui-search-text"},[t._v("发布动态")])],1),i("v-uni-view",{staticClass:"tui-notice-box",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"tui-add-text"},[t._v("发布")])],1)],1)],1),i("v-uni-view",{staticClass:"select-topic-class",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selTopicClass.apply(void 0,arguments)}}},[null!=t.category.title?[i("v-uni-view",{staticClass:"select-title"},[t._v(t._s(t.category.title))]),i("v-uni-view",{staticClass:"select-desc",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.delTitleClass.apply(void 0,arguments)}}},[i("tui-icon",{attrs:{name:"shut",size:48}})],1)]:[i("v-uni-view",{staticClass:"select-title"},[t._v("选择分类")]),i("v-uni-view",{staticClass:"select-desc"},[i("v-uni-text",[t._v("发布到指定分类更多人看到哦~")]),i("tui-icon",{attrs:{name:"arrowright",color:"#FFE933",size:64}})],1)]],2),t.selTitle.title?i("v-uni-view",{staticClass:"topic-tilte"},[t._v("#"+t._s(t.selTitle.title)+"#")]):t._e(),i("v-uni-view",{staticClass:"add-topic-text"},[i("v-uni-textarea",{attrs:{value:t.text,focus:!0,placeholder:"选择发布的图片和输入想要发布的文字~"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.inputChange.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"tui-box-upload"},[i("tui-upload",{attrs:{showTitle:!0,serverUrl:t.serverUrl},on:{selTitle:function(e){arguments[0]=e=t.$handleEvent(e),t.selTitleHandle.apply(void 0,arguments)},complete:function(e){arguments[0]=e=t.$handleEvent(e),t.result.apply(void 0,arguments)},remove:function(e){arguments[0]=e=t.$handleEvent(e),t.remove.apply(void 0,arguments)}}})],1)],1)},d=[]},"524d":function(t,e,i){"use strict";var a=i("c9d1"),n=i.n(a);n.a},"756b":function(t,e,i){"use strict";i.r(e);var a=i("5115"),n=i("b6e5");for(var d in n)"default"!==d&&function(t){i.d(e,t,(function(){return n[t]}))}(d);i("524d");var o,r=i("f0c5"),c=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"ddcadd16",null,!1,a["a"],o);e["default"]=c.exports},b6e5:function(t,e,i){"use strict";i.r(e);var a=i("3c0f"),n=i.n(a);for(var d in a)"default"!==d&&function(t){i.d(e,t,(function(){return a[t]}))}(d);e["default"]=n.a},bd65:function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,"uni-page-body[data-v-ddcadd16]{background-color:#fff}.container[data-v-ddcadd16]{padding:%?0?% 0 %?120?% 0;box-sizing:border-box;position:relative}.header[data-v-ddcadd16]{padding:%?80?% %?90?% %?60?% %?90?%;box-sizing:border-box}.title[data-v-ddcadd16]{font-size:%?34?%;color:#333;font-weight:500}.sub-title[data-v-ddcadd16]{font-size:%?24?%;color:#7a7a7a;padding-top:%?18?%}.tui-box-upload[data-v-ddcadd16]{padding-left:%?25?%;margin-bottom:%?90?%;box-sizing:border-box}.tui-title[data-v-ddcadd16]{width:100%;padding:%?50?% %?30?% %?30?%;box-sizing:border-box;font-weight:700}.tui-header-bg[data-v-ddcadd16]{width:100%;margin:0}.tui-header-img[data-v-ddcadd16]{width:100%;height:%?440?%;display:block}.tui-header-icon[data-v-ddcadd16]{width:100%;position:fixed;top:0;padding:0 %?12?%;display:flex;align-items:center;height:%?64?%;-webkit-transform:translateZ(0);transform:translateZ(0);z-index:99999;box-sizing:border-box}.tui-content-box[data-v-ddcadd16]{width:100%;height:%?88?%;padding:0 %?30?%;box-sizing:border-box;display:flex;align-items:center;justify-content:space-between}.tui-avatar-box[data-v-ddcadd16]{width:%?60?%;height:%?60?%;display:flex;align-items:center;justify-content:center;flex-shrink:0}.tui-avatar[data-v-ddcadd16]{width:%?56?%;height:%?56?%;border-radius:50%}.tui-search-box[data-v-ddcadd16]{height:%?64?%;margin:0 %?28?%;border-radius:%?36?%;font-size:%?36?%;padding:0 %?24?%;box-sizing:border-box;color:#bfbfbf;display:flex;align-items:center;font-weight:700;color:#000}.select-topic-class[data-v-ddcadd16]{height:%?72?%;margin:%?20?% %?20?%;border-radius:%?10?%;background-color:#f1f1f1;padding:0 %?24?%;box-sizing:border-box;color:#bfbfbf;display:flex;align-items:center;justify-content:space-between}.select-title[data-v-ddcadd16]{color:#000;font-size:%?34?%;font-weight:700}.select-desc[data-v-ddcadd16]{display:flex;align-items:center}.add-topic-text[data-v-ddcadd16]{box-sizing:border-box;width:100%;padding-top:%?10?%;padding-left:%?45?%}.tui-bg-white[data-v-ddcadd16]{background-color:#fff!important}.tui-search-text[data-v-ddcadd16]{padding-left:%?10?%}.tui-add-text[data-v-ddcadd16]{color:#000;padding:%?10?% %?30?%;font-size:%?28?%;box-sizing:border-box;font-weight:700;border-radius:%?40?%;background-color:#ffe933}.topic-tilte[data-v-ddcadd16]{padding:%?10?% %?40?%;box-sizing:border-box;font-weight:700;color:#5677fc}.tui-notice-box[data-v-ddcadd16]{position:relative;flex-shrink:0;font-size:%?44?%;color:#fff}body.?%PAGE?%[data-v-ddcadd16]{background-color:#fff}",""]),t.exports=e},c9d1:function(t,e,i){var a=i("bd65");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("22c33de1",a,!0,{sourceMap:!1,shadowMode:!1})}}]);