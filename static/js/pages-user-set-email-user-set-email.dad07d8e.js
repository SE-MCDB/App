(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-set-email-user-set-email"],{"0ddf":function(t,e,n){var a=n("2b1d");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("1c9b33fe",a,!0,{sourceMap:!1,shadowMode:!1})},"13e1":function(t,e,n){"use strict";var a=n("0ddf"),i=n.n(a);i.a},"23b2":function(t,e,n){"use strict";var a;n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return a}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"body"},[n("v-uni-input",{staticClass:"uni-input common-input",attrs:{type:"text",placeholder:"输入需要绑定的邮箱"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),n("v-uni-view",{staticClass:"login-input-box"},[n("v-uni-input",{staticClass:"uni-input common-input forget-input",attrs:{type:"text",placeholder:"请输入验证码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),n("v-uni-view",{staticClass:"forget u-f-ajc login-font-color yanzhengma",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.getCheckNum.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"u-f-ajc"},[t._v(t._s(t.codetime?t.codetime+" s":"获取验证码"))])],1)],1),n("v-uni-button",{staticClass:"user-set-btn",class:{"user-set-btn-disable":t.disabled},attrs:{loading:t.loading,type:"primary",disabled:t.disabled},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}},[t._v("完成")])],1)},r=[]},"2ad1":function(t,e,n){"use strict";var a=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("96cf");var i=a(n("1da1")),r=a(n("5530")),o=n("26cb"),s=n("f34e"),u={computed:(0,r.default)({},(0,o.mapState)(["userInfo"])),data:function(){return{email:"",password:"",disabled:!0,loading:!1,codetime:0}},mounted:function(){this.userInfo&&(this.email=this.userInfo.email)},watch:{email:function(t){this.change()},password:function(t){this.change()}},methods:{change:function(){this.email&&this.password?this.disabled=!1:this.disabled=!0},getCheckNum:function(){var t=this;return(0,i.default)(regeneratorRuntime.mark((function e(){var n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.codetime>0)){e.next=2;break}return e.abrupt("return");case 2:if(n=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/,n.test(t.email)){e.next=6;break}return uni.showToast({title:"请输入正确邮箱格式",icon:"none"}),e.abrupt("return",!1);case 6:return e.next=8,(0,s.getEmailCode)(t.email);case 8:a=e.sent,console.log(a),t.codetime=60,i=setInterval((function(){t.codetime--,t.codetime<1&&(clearInterval(i),t.codetime=0)}),1e3);case 12:case"end":return e.stop()}}),e)})))()},check:function(){if(!this.email||""==this.email)return uni.showToast({title:"邮箱不能为空",icon:"none"}),!1;var t=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;return t.test(this.email)?!(!this.password||""==this.password)||(uni.showToast({title:"密码不能为空",icon:"none"}),!1):(uni.showToast({title:"请输入正确邮箱格式",icon:"none"}),!1)},submit:function(){var t=this;return(0,i.default)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.loading=!0,t.disabled=!0,t.check()){e.next=6;break}return t.loading=!1,t.disabled=!1,e.abrupt("return");case 6:return e.next=8,(0,s.bindEmail)({email:t.email,code:t.password});case 8:if(n=e.sent,0!=n.code){e.next=14;break}uni.showToast({title:"邮箱绑定成功",icon:"success"}),uni.navigateBack({delta:1}),e.next=16;break;case 14:return uni.showToast({title:"邮箱绑定失败",icon:"success"}),e.abrupt("return");case 16:t.loading=!1,t.disabled=!1;case 18:case"end":return e.stop()}}),e)})))()}}};e.default=u},"2b1d":function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,'/* 公共按钮 */.user-set-btn[data-v-47727d64]{width:100%;margin:%?20?% 0;background:#ffe933!important;border:0!important;color:#333!important}.user-set-btn-disable[data-v-47727d64]{background:#f4f4f4!important;border:%?1?% solid #eee!important;color:#909090!important}.body[data-v-47727d64]{padding:0 %?20?%!important}.common-input[data-v-47727d64]{font-size:%?30?%;border-bottom:%?1?% solid #f4f4f4}.login-font-color[data-v-47727d64]{color:#bbb}.login-padding[data-v-47727d64]{padding:%?20?% 0}.icon-guanbi[data-v-47727d64]{position:fixed;top:%?60?%;left:%?30?%;font-size:%?40?%;font-weight:700;color:#332f0a;z-index:100}.loginhead[data-v-47727d64]{width:100%}.other-login-title[data-v-47727d64]{position:relative}.other-login-title[data-v-47727d64]:before,.other-login-title[data-v-47727d64]:after{content:"";position:absolute;background:#bbb;height:%?1?%;width:%?100?%;top:50%}.other-login-title[data-v-47727d64]:before{left:25%}.other-login-title[data-v-47727d64]:after{right:25%}.login-input-box[data-v-47727d64]{position:relative}.login-input-box .forget-input[data-v-47727d64]{padding-right:%?150?%}.login-input-box .forget[data-v-47727d64],.login-input-box .phone[data-v-47727d64]{position:absolute;top:0;height:100%;z-index:100}.login-input-box .forget[data-v-47727d64]{width:%?150?%;right:0}.login-input-box .phone[data-v-47727d64]{width:%?100?%;left:0;font-weight:700}.login-input-box .phone-input[data-v-47727d64]{padding-left:%?100?%}.yanzhengma uni-view[data-v-47727d64]{background:#eee;border-radius:%?10?%;font-size:%?25?%;width:%?150?%;padding:%?10?% 0}',""]),t.exports=e},7442:function(t,e,n){"use strict";n.r(e);var a=n("23b2"),i=n("7e9c");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);n("13e1");var o,s=n("f0c5"),u=Object(s["a"])(i["default"],a["b"],a["c"],!1,null,"47727d64",null,!1,a["a"],o);e["default"]=u.exports},"7e9c":function(t,e,n){"use strict";n.r(e);var a=n("2ad1"),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a},f34e:function(t,e,n){"use strict";var a=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.getEmailCode=e.bindEmail=void 0,n("96cf");var i=a(n("1da1")),r=a(n("4622")),o=n("13b4"),s=function(){var t=(0,i.default)(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r.default.post("user/email",e,o.headerForm);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();e.bindEmail=s;var u=function(){var t=(0,i.default)(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r.default.post("user/email",{email:e},o.headerForm);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();e.getEmailCode=u}}]);