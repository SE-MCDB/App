(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-add-title-add-title"],{"0faa":function(t,e,a){"use strict";a.r(e);var i=a("d1ce"),n=a.n(i);for(var o in i)"default"!==o&&function(t){a.d(e,t,(function(){return i[t]}))}(o);e["default"]=n.a},"1ee3":function(t,e,a){"use strict";a.r(e);var i=a("cd10"),n=a("0faa");for(var o in n)"default"!==o&&function(t){a.d(e,t,(function(){return n[t]}))}(o);a("8555");var r,s=a("f0c5"),c=Object(s["a"])(n["default"],i["b"],i["c"],!1,null,"a180463a",null,!1,i["a"],r);e["default"]=c.exports},"46db":function(t,e,a){var i=a("f625");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("62ad6d14",i,!0,{sourceMap:!1,shadowMode:!1})},"72b5":function(t,e,a){"use strict";var i=a("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.addTopicTitle=e.uploudFile=e.getCategory=void 0,a("96cf");var n=i(a("1da1")),o=i(a("4622")),r=function(){var t=(0,n.default)(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o.default.get("/category/list");case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();e.getCategory=r;var s=function(){var t=(0,n.default)(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o.default.uploudFile("/upload/cloud",e);case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();e.uploudFile=s;var c=function(){var t=(0,n.default)(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,o.default.post("topic/title",e);case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();e.addTopicTitle=c},8555:function(t,e,a){"use strict";var i=a("46db"),n=a.n(i);n.a},cd10:function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){return i}));var i={tuiNavigationBar:a("cad2").default,tuiIcon:a("3e6d").default,tuiUpload:a("a404").default},n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"container"},[a("tui-navigation-bar",{attrs:{backgroundColor:"255,255,255",isFixed:!1,isOpcity:!1}},[a("v-uni-view",{staticClass:"tui-content-box"},[a("v-uni-view",{staticClass:"tui-avatar-box",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.back.apply(void 0,arguments)}}},[a("tui-icon",{attrs:{name:"back",color:"#FFE933",size:64}})],1),a("v-uni-view",{staticClass:"tui-search-box"},[a("v-uni-view",{staticClass:"tui-search-text"},[t._v("发布话题")])],1),a("v-uni-view",{staticClass:"tui-notice-box",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}},[a("v-uni-text",{staticClass:"tui-add-text"},[t._v("发布")])],1)],1)],1),a("v-uni-view",{staticClass:"select-topic-class",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.selTopicClass.apply(void 0,arguments)}}},[null!=t.category.title?[a("v-uni-view",{staticClass:"select-title"},[t._v(t._s(t.category.title))]),a("v-uni-view",{staticClass:"select-desc",on:{click:function(e){e.stopPropagation(),arguments[0]=e=t.$handleEvent(e),t.delTitleClass.apply(void 0,arguments)}}},[a("tui-icon",{attrs:{name:"shut",size:48}})],1)]:[a("v-uni-view",{staticClass:"select-title"},[t._v("选择分类")]),a("v-uni-view",{staticClass:"select-desc"},[a("v-uni-text",[t._v("发布到指定分类更多人看到哦~")]),a("tui-icon",{attrs:{name:"arrowright",color:"#FFE933",size:64}})],1)]],2),a("v-uni-view",{staticClass:"add-topic-text"},[a("v-uni-textarea",{attrs:{value:t.title,maxlength:15,focus:!0,placeholder:"请输入15字以内的话题~"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.inputChangeTitle.apply(void 0,arguments)}}})],1),a("v-uni-view",{staticClass:"add-topic-text"},[a("v-uni-textarea",{attrs:{value:t.text,focus:!0,placeholder:"请输入150字以内的话题描述~"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.inputChangeDesc.apply(void 0,arguments)}}})],1),a("v-uni-view",{staticClass:"tui-box-upload"},[a("tui-upload",{attrs:{showTitle:!1,limit:1,serverUrl:t.serverUrl},on:{selTitle:function(e){arguments[0]=e=t.$handleEvent(e),t.selTitleHandle.apply(void 0,arguments)},complete:function(e){arguments[0]=e=t.$handleEvent(e),t.result.apply(void 0,arguments)},remove:function(e){arguments[0]=e=t.$handleEvent(e),t.remove.apply(void 0,arguments)}}})],1)],1)},o=[]},d1ce:function(t,e,a){"use strict";(function(t){var i=a("4ea4");a("2ca0"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("96cf");var n=i(a("1da1")),o=i(a("5530")),r=a("26cb"),s=a("72b5"),c=a("13b4"),l={data:function(){return{imageData:[],serverUrl:c.baseUrl+"upload/cloud",text:"",top:0,opcity:0,scrollTop:.5,placeholder:"",title:""}},computed:(0,o.default)({},(0,r.mapState)(["userInfo","selTitle","category"])),methods:(0,o.default)((0,o.default)({},(0,r.mapMutations)(["delSelTitle","resetSelTitle","delCategory"])),{},{result:function(t){this.imageData=t.imgArr},remove:function(t){t.index},initNavigation:function(t){this.opcity=t.opcity,this.top=t.top},opcityChange:function(t){this.opcity=t.opcity},back:function(){uni.navigateBack()},inputChangeDesc:function(t){this.text=t.detail.value},inputChangeTitle:function(t){this.title=t.detail.value},skipToSearch:function(e){t("log",e," at pages/add-title/add-title.vue:104"),this.$http.href("../../pages/search/search")},delTitleClass:function(){this.delCategory()},selTopicClass:function(){this.$http.href("../select-category/select-category?title=1")},selTitleHandle:function(){this.$http.href("../select-title/select-title")},submit:function(){var e=this;return(0,n.default)(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t("log","发布"," at pages/add-title/add-title.vue:117"),""!==e.text&&0!==e.imageData.length){a.next=4;break}return 0===e.imageData.length?e.$http.toast("请上传图片！"):e.$http.toast("内容为空！"),a.abrupt("return");case 4:return a.next=6,(0,s.addTopicTitle)({uid:e.userInfo.id,cid:e.category.id?e.category.id:0,title:e.title,description:e.text,urlType:"img",titlePic:e.imageData[0]&&e.imageData[0].startsWith("http")?e.imageData.join(","):""});case 6:i=a.sent,0===i.code?uni.showToast({title:"发表成功",icon:"success",duration:200,success:function(){e.text="",e.imageData.length=0,uni.navigateBack()}}):uni.showToast({title:"发表失败",icon:"none",duration:200,success:function(){e.imageData.length=0,e.text="",uni.navigateBack()}});case 8:case"end":return a.stop()}}),a)})))()}}),onPageScroll:function(t){this.scrollTop=t.scrollTop}};e.default=l}).call(this,a("0de9")["log"])},f625:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,"uni-page-body[data-v-a180463a]{background-color:#fff}.container[data-v-a180463a]{padding:%?0?% 0 %?120?% 0;box-sizing:border-box;position:relative}.header[data-v-a180463a]{padding:%?80?% %?90?% %?60?% %?90?%;box-sizing:border-box}.title[data-v-a180463a]{font-size:%?34?%;color:#333;font-weight:500}.sub-title[data-v-a180463a]{font-size:%?24?%;color:#7a7a7a;padding-top:%?18?%}.tui-box-upload[data-v-a180463a]{padding-left:%?25?%;margin-bottom:%?90?%;box-sizing:border-box}.tui-title[data-v-a180463a]{width:100%;padding:%?50?% %?30?% %?30?%;box-sizing:border-box;font-weight:700}.tui-header-bg[data-v-a180463a]{width:100%;margin:0}.tui-header-img[data-v-a180463a]{width:100%;height:%?440?%;display:block}.tui-header-icon[data-v-a180463a]{width:100%;position:fixed;top:0;padding:0 %?12?%;display:flex;align-items:center;height:%?64?%;-webkit-transform:translateZ(0);transform:translateZ(0);z-index:99999;box-sizing:border-box}.tui-content-box[data-v-a180463a]{width:100%;height:%?88?%;padding:0 %?30?%;box-sizing:border-box;display:flex;align-items:center;justify-content:space-between}.tui-avatar-box[data-v-a180463a]{width:60px;height:60px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.tui-avatar[data-v-a180463a]{width:56px;height:56px;border-radius:50%}.tui-search-box[data-v-a180463a]{height:%?64?%;margin:0 %?28?%;border-radius:36px;font-size:36px;padding:0 24px;box-sizing:border-box;color:#bfbfbf;display:flex;align-items:center;font-weight:700;color:#000}.select-topic-class[data-v-a180463a]{height:%?72?%;margin:%?20?% %?20?%;border-radius:10px;background-color:#f1f1f1;padding:0 24px;box-sizing:border-box;color:#bfbfbf;display:flex;align-items:center;justify-content:space-between}.select-title[data-v-a180463a]{color:#000;font-size:%?34?%;font-weight:700}.select-desc[data-v-a180463a]{display:flex;align-items:center}.add-topic-text[data-v-a180463a]{box-sizing:border-box;width:100%;padding-top:%?10?%;padding-left:%?45?%}.add-topic-text uni-textarea[data-v-a180463a]{font-size:%?32?%;width:100%}.tui-bg-white[data-v-a180463a]{background-color:#fff!important}.tui-search-text[data-v-a180463a]{padding-left:%?10?%}.tui-add-text[data-v-a180463a]{color:#000;padding:%?10?% %?30?%;font-size:%?28?%;box-sizing:border-box;font-weight:700;border-radius:%?40?%;background-color:#ffe933}.topic-tilte[data-v-a180463a]{padding:%?10?% %?40?%;box-sizing:border-box;font-weight:700;color:#5677fc}.tui-notice-box[data-v-a180463a]{position:relative;flex-shrink:0;font-size:%?44?%;color:#fff}body.?%PAGE?%[data-v-a180463a]{background-color:#fff}",""]),t.exports=e}}]);