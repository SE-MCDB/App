(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-check-in-check-in"],{"3c08":function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return n}));var n={tuiIcon:a("01c2").default},r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"all"},[a("v-uni-view",{staticClass:"bar"},[a("v-uni-view",{staticClass:"previous",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handleCalendar(0)}}},["ch"==e.langType?a("v-uni-button",{staticClass:"barbtn"},[e._v("上一月")]):a("v-uni-button",{staticClass:"barbtn"},[e._v("Last")])],1),a("v-uni-view",{staticClass:"date"},[e._v(e._s(e.cur_year||"--")+" 年 "+e._s(e.cur_month||"--")+" 月")]),a("v-uni-view",{staticClass:"next",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handleCalendar(1)}}},["ch"==e.langType?a("v-uni-button",{staticClass:"barbtn"},[e._v("下一月")]):a("v-uni-button",{staticClass:"barbtn"},[e._v("Next")])],1)],1),"ch"==e.langType?a("v-uni-view",{staticClass:"week"},e._l(e.weeks_ch,(function(t,n){return a("v-uni-view",{key:n},[e._v(e._s(t))])})),1):a("v-uni-view",{staticClass:"week"},e._l(e.weeks_en,(function(t,n){return a("v-uni-view",{key:n},[e._v(e._s(t))])})),1),a("v-uni-view",{staticClass:"myDateTable"},e._l(e.days,(function(t,n){return a("v-uni-view",{key:n,staticClass:"dateCell"},[void 0==t.date||null==t.date?a("v-uni-view",{staticClass:"cell"},[a("v-uni-text",{attrs:{decode:!0}},[e._v("")])],1):a("v-uni-view",[1==t.isSign?a("v-uni-view",{staticClass:"cell greenColor sel "},[a("v-uni-text",{staticClass:"sel-text"},[e._v("√")])],1):e.cur_year<e.toYear||e.cur_year==e.toYear&&e.cur_month<e.toMonth||e.cur_year==e.toYear&&e.cur_month==e.toMonth&&t.date<e.today?a("v-uni-view",{staticClass:"cell redColor bgGray",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.clickSignUp(t.date,0)}}},[a("v-uni-text",[e._v(e._s(t.date))])],1):t.date==e.today&&e.cur_month==e.toMonth&&e.cur_year==e.toYear?a("v-uni-view",{staticClass:"cell whiteColor bgBlue",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.clickSignUp(t.date,1)}}},[a("v-uni-text",[e._v("签到")])],1):a("v-uni-view",{staticClass:"whiteColor cell"},[a("v-uni-text",[e._v(e._s(t.date))])],1)],1)],1)})),1),a("v-uni-view",{staticClass:"TipArea "},[a("v-uni-view",{staticClass:"dayText"},[e._v("打卡天数")]),a("v-uni-view",{staticClass:"warpTotalSign"},[a("v-uni-text",[e._v("已签到")]),a("v-uni-text",{staticClass:"totalSign"},[e._v(e._s(e.SignUp.length>0?e.SignUp.length:"0"))]),a("v-uni-text",[e._v("天")])],1),""!=e.adress?a("v-uni-view",{staticClass:"location"},[a("v-uni-view",{},[a("tui-icon",{attrs:{name:"location",size:56}})],1),a("v-uni-text",{staticClass:"adress"},[e._v(e._s(e.adress))])],1):e._e()],1)],1)},i=[]},"46d8":function(e,t,a){"use strict";a.r(t);var n=a("3c08"),r=a("a63d");for(var i in r)"default"!==i&&function(e){a.d(t,e,(function(){return r[e]}))}(i);a("a73c");var s,c=a("f0c5"),u=Object(c["a"])(r["default"],n["b"],n["c"],!1,null,"274ca544",null,!1,n["a"],s);t["default"]=u.exports},"585f":function(e,t,a){var n=a("24fb");t=n(!1),t.push([e.i,".all[data-v-274ca544]{margin-top:%?10?%;height:100vh;box-sizing:border-box;overflow:hidden}.all .bar[data-v-274ca544]{display:flex;flex-direction:row;justify-content:space-between;margin:%?20?% %?20?%;padding:%?10?%}.bar .barbtn[data-v-274ca544]{height:30px;line-height:30px;font-size:12px}.all .week[data-v-274ca544]{display:flex;flex-direction:row;justify-content:space-between;padding:%?20?%;padding-left:%?40?%;padding-right:%?40?%;margin:%?20?%;border-radius:10px;background-color:#fff}.myDateTable[data-v-274ca544]{margin:2vw;padding:2vw;border-radius:10px;background:linear-gradient(#74aada,#94db98)}.myDateTable .dateCell[data-v-274ca544]{width:11vw;padding:1vw;display:inline-block;text-align:center;font-size:16px}.dateCell .cell[data-v-274ca544]{display:flex;border-radius:50%;height:11vw;justify-content:center;align-items:center}.whiteColor[data-v-274ca544]{color:#fff}.greenColor[data-v-274ca544]{color:#01b90b;font-weight:700}.bgWhite[data-v-274ca544]{background-color:#fff}.bgGray[data-v-274ca544]{background-color:hsla(0,0%,100%,.42)}.bgBlue[data-v-274ca544]{font-size:14px;background-color:#4b95e6}.redColor[data-v-274ca544]{color:red}.TipArea[data-v-274ca544]{word-break:break-all;word-wrap:break-word;font-size:14px;padding:10px}.impTip[data-v-274ca544]{display:inline-block;color:red}.dayText[data-v-274ca544]{margin-left:%?20?%}.sel-text[data-v-274ca544]{font-size:%?48?%;color:#ffe933;font-weight:700}.warpTotalSign[data-v-274ca544]{display:flex;justify-content:space-around;align-items:center}.totalSign[data-v-274ca544]{font-size:%?100?%;font-weight:700;text-align:center;color:#ffe933}.location[data-v-274ca544]{display:flex;line-height:1;align-items:center;padding:0 %?80?%}.adress[data-v-274ca544]{padding-left:%?20?%}",""]),e.exports=t},"6d58":function(e,t,a){"use strict";(function(e){var n=a("4ea4");a("d81d"),a("a9e3"),a("e25e"),a("ac1f"),a("5319"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("96cf");var r=n(a("1da1")),i=n(a("5530")),s=a("e22a"),c=a("26cb"),u={data:function(){return{days:[],SignUp:[],cur_year:0,cur_month:0,today:parseInt((new Date).getDate()),toMonth:parseInt((new Date).getMonth()+1),toYear:parseInt((new Date).getFullYear()),weeks_ch:["日","一","二","三","四","五","六"],weeks_en:["Sun","Mon","Tues","Wed","Thur","Fri","Sat"],adress:""}},computed:(0,i.default)({},(0,c.mapState)(["userInfo"])),props:{sendYear:{type:Number,default:(new Date).getFullYear()},sendMonth:{type:Number,default:(new Date).getMonth()+1},dataSource:{type:Array,default:function(){return[]}},langType:{type:String,default:"ch"}},created:function(){var e=this;return(0,r.default)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.cur_year=e.sendYear,e.cur_month=e.sendMonth,t.next=4,e.initData();case 4:e.calculateEmptyGrids(e.cur_year,e.cur_month),e.calculateDays(e.cur_year,e.cur_month),e.onJudgeSign();case 7:case"end":return t.stop()}}),t)})))()},watch:{dataSource:"onResChange"},methods:{initData:function(){var t=this;return(0,r.default)(regeneratorRuntime.mark((function a(){var n,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!t.userInfo.id){a.next=7;break}return a.next=3,(0,s.getSignList)();case 3:n=a.sent,r=t.cur_year+"-"+t.cur_month+"-"+t.today,t.SignUp=n.map((function(e){return e.signIn===r&&(t.adress=e.adress),e.signIn})),e("log",t.SignUp," at pages/check-in/check-in.vue:133");case 7:case"end":return a.stop()}}),a)})))()},getThisMonthDays:function(e,t){return new Date(e,t,0).getDate()},getFirstDayOfWeek:function(e,t){return new Date(Date.UTC(e,t-1,1)).getDay()},calculateEmptyGrids:function(e,t){this.days=[];var a=this.getFirstDayOfWeek(e,t);if(a>0)for(var n=0;n<a;n++){var r={date:null,isSign:!1};this.days.push(r)}},calculateDays:function(e,t){for(var a=this.getThisMonthDays(e,t),n=1;n<=a;n++){var r={date:n,isSign:!1};this.days.push(r)}},onResChange:function(e,t){this.onJudgeSign()},onJudgeSign:function(){for(var e=this.SignUp,t=this.days,a=0;a<e.length;a++){var n=new Date(e[a].replace(/-/g,"/")),r=n.getFullYear(),i=n.getMonth()+1,s=n.getDate();s=parseInt(s);for(var c=0;c<t.length;c++)r===this.cur_year&&i===this.cur_month&&t[c].date===s&&(t[c].isSign=!0)}this.days=t},handleCalendar:function(e){var t=this;return(0,r.default)(regeneratorRuntime.mark((function a(){var n,r,i,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:n=parseInt(t.cur_year),r=parseInt(t.cur_month),s=n,0===e?(i=r-1,i<1&&(s=n-1,i=12)):(i=r+1,i>12&&(s=n+1,i=1)),t.calculateEmptyGrids(s,i),t.calculateDays(s,i),t.cur_year=s,t.cur_month=i,t.onJudgeSign();case 9:case"end":return a.stop()}}),a)})))()},clickSignUp:function(e,t){var a=this;return(0,r.default)(regeneratorRuntime.mark((function n(){var r,i,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r="签到",0!==t){n.next=4;break}return r="补签",n.abrupt("return");case 4:return uni.showToast({title:r+"成功",icon:"success",duration:2e3}),i=a.cur_year+"-"+a.cur_month+"-"+e,n.next=8,(0,s.saveSign)({signIn:i});case 8:c=n.sent,0===c.code&&(a.SignUp.push(a.cur_year+"-"+a.cur_month+"-"+e),a.adress=""===c.message?"中国":c.message,a.$forceUpdate()),a.$emit("clickChange",a.cur_year+"-"+a.cur_month+"-"+e),a.onJudgeSign();case 12:case"end":return n.stop()}}),n)})))()}}};t.default=u}).call(this,a("0de9")["log"])},"9bb0":function(e,t,a){var n=a("585f");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var r=a("4f06").default;r("0fcec040",n,!0,{sourceMap:!1,shadowMode:!1})},a63d:function(e,t,a){"use strict";a.r(t);var n=a("6d58"),r=a.n(n);for(var i in n)"default"!==i&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t["default"]=r.a},a73c:function(e,t,a){"use strict";var n=a("9bb0"),r=a.n(n);r.a},e22a:function(e,t,a){"use strict";var n=a("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.saveSign=t.getSignList=void 0,a("96cf");var r=n(a("1da1")),i=n(a("9150")),s=function(){var e=(0,r.default)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.default.get("user/signin");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t.getSignList=s;var c=function(){var e=(0,r.default)(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.default.post("user/signin",t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.saveSign=c}}]);