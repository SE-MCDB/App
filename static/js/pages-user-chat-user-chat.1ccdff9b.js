(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-chat-user-chat"],{"0384":function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){return n}));var n={tuiButton:r("bff5").default,tuiBubblePopup:r("1b6c").default,tuiListCell:r("fe6b").default,tuiIcon:r("3e6d").default},a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-uni-view",[e.need&&e.need.need_id?r("tui-button",{attrs:{size:28,plain:!0},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.openmenu.apply(void 0,arguments)}}},[e._v("需求标题："+e._s(this.need.title))]):e._e(),"5"==e.userInfo.type&&e.need?[r("tui-bubble-popup",{attrs:{show:e.show,mask:!0,position:"absolute",width:"370rpx",translateY:"0rpx",triangleTop:"-50rpx",borderWidth:"0"},on:{close:function(t){arguments[0]=t=e.$handleEvent(t),e.openmenu()}}},[r("tui-list-cell",{attrs:{hover:!0,arrow:!0,backgroundColor:"#dcdcdc"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.goToNeedDetail(e.need.need_id)}}},[r("tui-icon",{attrs:{name:"search"}}),e._v("查看需求")],1)],1),0==e.order.order_id?r("v-uni-view",[r("tui-bubble-popup",{attrs:{show:e.show,mask:!1,position:"absolute",width:"370rpx",translateY:"0rpx",translateX:"380rpx",triangleTop:"-20rpx",borderWidth:"0"},on:{close:function(t){arguments[0]=t=e.$handleEvent(t),e.openmenu()}}},[r("tui-list-cell",{attrs:{hover:!0,arrow:!1,backgroundColor:"#dcdcdc"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.createOrderAndRefresh()}}},[r("tui-icon",{attrs:{name:"order"}}),e._v("发起订单")],1)],1)],1):e._e(),0!=e.order.order_id?r("v-uni-view",[r("tui-bubble-popup",{attrs:{show:e.show,mask:!1,position:"absolute",width:"370rpx",translateY:"0rpx",translateX:"380rpx",triangleTop:"-20rpx",borderWidth:"0"},on:{close:function(t){arguments[0]=t=e.$handleEvent(t),e.openmenu()}}},[r("tui-list-cell",{attrs:{hover:!0,arrow:!0,backgroundColor:"#dcdcdc"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.goToOrderDetail(e.order.order_id)}}},[r("tui-icon",{attrs:{name:"search"}}),e._v("查看订单")],1)],1)],1):e._e(),0!=e.order.order_id&&1==e.order.state?r("tui-bubble-popup",{attrs:{show:e.show,mask:!0,position:"absolute",width:"370rpx",translateY:"120rpx",triangleTop:"-50rpx",borderWidth:"0"},on:{close:function(t){arguments[0]=t=e.$handleEvent(t),e.openmenu()}}},[r("tui-list-cell",{attrs:{hover:!0,arrow:!1,backgroundColor:"#dcdcdc"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.accomplishOrderAndRefresh()}}},[r("tui-icon",{attrs:{name:"check"}}),e._v("完成订单")],1)],1):e._e()]:"4"==e.userInfo.type&&e.need?[r("tui-bubble-popup",{attrs:{show:e.show,mask:!0,position:"absolute",width:"370rpx",translateY:"0rpx",triangleTop:"-50rpx",borderWidth:"0"},on:{close:function(t){arguments[0]=t=e.$handleEvent(t),e.openmenu()}}},[r("tui-list-cell",{attrs:{hover:!0,arrow:!0,backgroundColor:"#dcdcdc"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.goToNeedDetail(e.need.need_id)}}},[r("tui-icon",{attrs:{name:"search"}}),e._v("查看需求")],1)],1),0!=e.order.order_id?[r("tui-bubble-popup",{attrs:{show:e.show,mask:!1,position:"absolute",width:"370rpx",translateY:"0rpx",translateX:"380rpx",triangleTop:"-20rpx",borderWidth:"0"},on:{close:function(t){arguments[0]=t=e.$handleEvent(t),e.openmenu()}}},[r("tui-list-cell",{attrs:{hover:!0,arrow:!0,backgroundColor:"#dcdcdc"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.goToOrderDetail(e.order.order_id)}}},[r("tui-icon",{attrs:{name:"search"}}),e._v("查看订单")],1)],1),0==e.order.state?r("v-uni-view",[r("tui-bubble-popup",{attrs:{show:e.show,mask:!0,position:"absolute",width:"370rpx",translateY:"120rpx",triangleTop:"-50rpx",borderWidth:"0"},on:{close:function(t){arguments[0]=t=e.$handleEvent(t),e.openmenu()}}},[r("tui-list-cell",{attrs:{hover:!0,arrow:!1,backgroundColor:"#dcdcdc"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.acceptOrderAndRefresh()}}},[r("tui-icon",{attrs:{name:"check"}}),e._v("接受订单")],1)],1),r("tui-bubble-popup",{attrs:{show:e.show,mask:!1,position:"absolute",width:"370rpx",translateY:"120rpx",translateX:"380rpx",triangleTop:"-20rpx",borderWidth:"0"},on:{close:function(t){arguments[0]=t=e.$handleEvent(t),e.openmenu()}}},[r("tui-list-cell",{attrs:{hover:!0,arrow:!1,backgroundColor:"#dcdcdc"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.rejectOrderAndRefresh()}}},[r("tui-icon",{attrs:{name:"shut"}}),e._v("拒绝订单")],1)],1)],1):e._e()]:e._e()]:e._e(),r("v-uni-scroll-view",{style:{height:e.style.contentH+"px"},attrs:{id:"scrollview","scroll-y":!0,"scroll-top":e.scrollTop,"scroll-with-animation":!0,"refresher-enabled":!0,"refresher-triggered":e.triggered},on:{refresherrefresh:function(t){arguments[0]=t=e.$handleEvent(t),e.scrollTopHandle.apply(void 0,arguments)}}},[e._l(e.currentChatMsgs,(function(t,n){return[r("v-uni-view",{key:n+"_0",staticClass:"chat-item"},[r("user-chat-list",{attrs:{item:t,index:n},on:{goToUserInfo:function(t){arguments[0]=t=e.$handleEvent(t),e.goToUserInfo.apply(void 0,arguments)}}})],1)]}))],2),r("user-chat-bottom",{on:{submit:function(t){arguments[0]=t=e.$handleEvent(t),e.submit.apply(void 0,arguments)}}})],2)},i=[]},"0633":function(e,t,r){var n=r("7e21");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=r("4f06").default;a("66f10f3e",n,!0,{sourceMap:!1,shadowMode:!1})},"0b0b":function(e,t,r){"use strict";r.r(t);var n=r("56af"),a=r.n(n);for(var i in n)"default"!==i&&function(e){r.d(t,e,(function(){return n[e]}))}(i);t["default"]=a.a},"1b6c":function(e,t,r){"use strict";r.r(t);var n=r("3ba4"),a=r("ae68");for(var i in a)"default"!==i&&function(e){r.d(t,e,(function(){return a[e]}))}(i);r("c671");var o,u=r("f0c5"),d=Object(u["a"])(a["default"],n["b"],n["c"],!1,null,"58b6c734",null,!1,n["a"],o);t["default"]=d.exports},"20ce":function(e,t,r){"use strict";var n=r("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.createContact=t.getNeedDetail=void 0,r("96cf");var a=n(r("1da1")),i=n(r("4622")),o=(n(r("46ee")),r("13b4")),u=function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(t){var r,n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("id is"+t),console.log("getNeedDetail"),r={Authorization:"Bearer "+uni.getStorageSync("token")},e.next=5,i.default.get("need/"+t,{},r);case 5:if(n=e.sent,n&&n.order&&n.order.length)for(a=0;a<n.order.length;a++)n.order[a].expert_icon=o.picUrl+n.order[a].expert_icon;return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.getNeedDetail=u;var d=function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={Authorization:"Bearer "+uni.getStorageSync("token")},e.next=3,i.default.post("need/contact",t,r);case 3:return n=e.sent,console.log(n.error_msg),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.createContact=d},2349:function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,'.tui-list-cell[data-v-54473b38]{position:relative;width:100%;box-sizing:border-box}.tui-radius[data-v-54473b38]{border-radius:%?6?%;overflow:hidden}.tui-cell-hover[data-v-54473b38]{background-color:#f1f1f1!important}.tui-list-cell[data-v-54473b38]::after{content:"";position:absolute;border-bottom:%?1?% solid #eaeef1;-webkit-transform:scaleY(.5) translateZ(0);transform:scaleY(.5) translateZ(0);-webkit-transform-origin:0 100%;transform-origin:0 100%;bottom:0;right:0;left:0}.tui-line-left[data-v-54473b38]::after{left:%?30?%!important}.tui-line-right[data-v-54473b38]::after{right:%?30?%!important}.tui-cell-unlined[data-v-54473b38]::after{border-bottom:0!important}.tui-cell-arrow[data-v-54473b38]::before{content:" ";height:10px;width:10px;border-width:2px 2px 0 0;border-color:silver;border-style:solid;-webkit-transform:matrix(.5,.5,-.5,.5,0,0);transform:matrix(.5,.5,-.5,.5,0,0);position:absolute;top:50%;margin-top:-6px;right:%?30?%}.tui-arrow-right[data-v-54473b38]::before{right:0!important}.tui-arrow-gray[data-v-54473b38]::before{border-color:#666!important}.tui-arrow-white[data-v-54473b38]::before{border-color:#fff!important}.tui-arrow-warning[data-v-54473b38]::before{border-color:#ff7900!important}.tui-arrow-success[data-v-54473b38]::before{border-color:#19be6b!important}.tui-arrow-danger[data-v-54473b38]::before{border-color:#eb0909!important}',""]),e.exports=t},"236a":function(e,t,r){"use strict";r.r(t);var n=r("0384"),a=r("ace0");for(var i in a)"default"!==i&&function(e){r.d(t,e,(function(){return a[e]}))}(i);var o,u=r("f0c5"),d=Object(u["a"])(a["default"],n["b"],n["c"],!1,null,"019b4292",null,!1,n["a"],o);t["default"]=d.exports},2400:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={name:"tuiBubblePopup",props:{width:{type:String,default:"300rpx"},radius:{type:String,default:"8rpx"},left:{type:String,default:"auto"},right:{type:String,default:"auto"},top:{type:String,default:"auto"},bottom:{type:String,default:"auto"},translateX:{type:String,default:"0"},translateY:{type:String,default:"0"},backgroundColor:{type:String,default:"#4c4c4c"},color:{type:String,default:"#fff"},borderWidth:{type:String,default:"12rpx"},direction:{type:String,default:"top"},triangleLeft:{type:String,default:"auto"},triangleRight:{type:String,default:"auto"},triangleTop:{type:String,default:"auto"},triangleBottom:{type:String,default:"auto"},position:{type:String,default:"fixed"},flexEnd:{type:Boolean,default:!1},mask:{type:Boolean,default:!0},maskBgColor:{type:String,default:"rgba(0, 0, 0, 0.4)"},show:{type:Boolean,default:!1}},methods:{handleClose:function(){this.show&&this.$emit("close",{})},stop:function(){return!1}}};t.default=n},2908:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={data:function(){return{text:""}},methods:{submit:function(){this.$emit("submit",this.text),this.text=""}}};t.default=n},"311d":function(e,t,r){"use strict";r.r(t);var n=r("4cef"),a=r.n(n);for(var i in n)"default"!==i&&function(e){r.d(t,e,(function(){return n[e]}))}(i);t["default"]=a.a},"3ba4":function(e,t,r){"use strict";var n;r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){return n}));var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-uni-view",{class:{"tui-flex-end":e.flexEnd}},[r("v-uni-view",{staticClass:"tui-popup-list",class:{"tui-popup-show":e.show,"tui-z_index":e.show&&"relative"!=e.position},style:{width:e.width,backgroundColor:e.backgroundColor,borderRadius:e.radius,color:e.color,position:e.position,left:e.left,right:e.right,bottom:e.bottom,top:e.top,transform:"translate("+e.translateX+","+e.translateY+")"}},["top"==e.direction?r("v-uni-view",{staticClass:"tui-triangle",style:{borderWidth:e.borderWidth,borderColor:"transparent transparent "+e.backgroundColor+" transparent",left:e.triangleLeft,right:e.triangleRight,top:e.triangleTop,bottom:e.triangleBottom}}):e._e(),"bottom"==e.direction?r("v-uni-view",{staticClass:"tui-triangle",style:{borderWidth:e.borderWidth,borderColor:e.backgroundColor+"  transparent transparent transparent",left:e.triangleLeft,right:e.triangleRight,top:e.triangleTop,bottom:e.triangleBottom}}):e._e(),"left"==e.direction?r("v-uni-view",{staticClass:"tui-triangle",style:{borderWidth:e.borderWidth,borderColor:"transparent  "+e.backgroundColor+" transparent transparent",left:e.triangleLeft,right:e.triangleRight,top:e.triangleTop,bottom:e.triangleBottom}}):e._e(),"right"==e.direction?r("v-uni-view",{staticClass:"tui-triangle",style:{borderWidth:e.borderWidth,borderColor:"transparent transparent  transparent "+e.backgroundColor,left:e.triangleLeft,right:e.triangleRight,top:e.triangleTop,bottom:e.triangleBottom}}):e._e(),e._t("default")],2),e.mask?r("v-uni-view",{staticClass:"tui-popup-mask",class:{"tui-popup-show":e.show},style:{backgroundColor:e.maskBgColor},on:{touchmove:function(t){t.stopPropagation(),t.preventDefault(),arguments[0]=t=e.$handleEvent(t),e.stop.apply(void 0,arguments)},click:function(t){arguments[0]=t=e.$handleEvent(t),e.handleClose.apply(void 0,arguments)}}}):e._e()],1)},i=[]},"4cef":function(e,t,r){"use strict";r("a9e3"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={props:{item:Object,index:Number},methods:{navUserInfo:function(){console.log(this.item),this.$emit("goToUserInfo",this.item.uid)}}};t.default=n},5194:function(e,t,r){"use strict";var n=r("a5e2"),a=r.n(n);a.a},"55fc":function(e,t,r){"use strict";r.r(t);var n=r("d72c"),a=r("311d");for(var i in a)"default"!==i&&function(e){r.d(t,e,(function(){return a[e]}))}(i);r("c6ae");var o,u=r("f0c5"),d=Object(u["a"])(a["default"],n["b"],n["c"],!1,null,"3a728c83",null,!1,n["a"],o);t["default"]=d.exports},"56af":function(e,t,r){"use strict";r("a9e3"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={name:"tuiListCell",props:{arrow:{type:Boolean,default:!1},arrowColor:{type:String,default:""},hover:{type:Boolean,default:!0},unlined:{type:Boolean,default:!1},lineLeft:{type:Boolean,default:!0},lineRight:{type:Boolean,default:!1},padding:{type:String,default:"26rpx 30rpx"},backgroundColor:{type:String,default:"#fff"},size:{type:Number,default:28},color:{type:String,default:"#333"},radius:{type:Boolean,default:!1},arrowRight:{type:Boolean,default:!0},index:{type:Number,default:0}},methods:{handleClick:function(){this.$emit("click",{index:this.index})}}};t.default=n},"5b36":function(e,t,r){"use strict";var n;r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){return n}));var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-uni-view",{staticClass:"user-chat-bottom u-f-ac animated fadeInDown fast"},[r("v-uni-input",{attrs:{type:"text",placeholder:"请输入私信","confirm-type":"search"},on:{confirm:function(t){arguments[0]=t=e.$handleEvent(t),e.submit.apply(void 0,arguments)}},model:{value:e.text,callback:function(t){e.text=t},expression:"text"}}),r("v-uni-view",{staticClass:"icon iconfont icon-fabu u-f-ajc",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.submit.apply(void 0,arguments)}}})],1)},i=[]},"7d2f":function(e,t,r){"use strict";var n=r("4ea4");r("a4d3"),r("e01a"),r("d81d"),Object.defineProperty(t,"__esModule",{value:!0}),t.accomplishOrder=t.abandonOrder=t.rejectOrder=t.acceptOrder=t.getAllOrder=t.getPendingOrder=t.getCooperatingOrder=t.getFinishedOrder=void 0,r("96cf");var a=n(r("1da1")),i=n(r("4622")),o=r("13b4");function u(e){var t={state:e.state,order_id:e.order_id,entp_id:e.need.enterprise_id,entp_name:e.need.enterprise_name,description:e.need.enterprise_description,headpic:o.picUrl+e.need.enterprise_pic,exp_id:e.expert_id,exp_name:e.expert_name,exp_pic:o.picUrl+e.expert_pic,exp_des:e.expert_description,title:e.need.title,time:e.end_time,need_id:e.need.need_id};return"undefined"!==t.description&&null!==t.description&&""!==t.description||(t.description="Lux et veritas"),"undefined"!==t.time&&null!==t.time&&""!==t.time||(t.time=e.create_time),t}var d=function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("getFinishedOrder"),e.next=3,i.default.get("user/"+t+"/order/finished");case 3:return r=e.sent,r=r.data,r&&r.length&&(r=r.map((function(e){return u(e)}))),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.getFinishedOrder=d;var s=function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("getCooperatingOrder"),e.next=3,i.default.get("user/"+t+"/order/cooperating");case 3:return r=e.sent,r=r.data,r&&r.length&&(r=r.map((function(e){return u(e)}))),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.getCooperatingOrder=s;var c=function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("getPendingOrder"),e.next=3,i.default.get("user/"+t+"/order/pending");case 3:return r=e.sent,r=r.data,r&&r.length&&(r=r.map((function(e){return u(e)}))),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.getPendingOrder=c;var l=function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("getAllOrder"),e.next=3,i.default.get("user/"+t+"/order/all");case 3:return r=e.sent,console.log(r),r=r.data,r&&r.length&&(r=r.map((function(e){return u(e)}))),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.getAllOrder=l;var f=function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("acceptOrder"),n={Authorization:"Bearer "+uni.getStorageSync("token")},e.next=4,i.default.post("user/"+t+"/order/"+r+"/accept",{},n);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();t.acceptOrder=f;var p=function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("rejectOrder"),n={Authorization:"Bearer "+uni.getStorageSync("token")},e.next=4,i.default.post("user/"+t+"/order/"+r+"/refuse",{},n);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();t.rejectOrder=p;var h=function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={Authorization:"Bearer "+uni.getStorageSync("token")},e.next=3,i.default.post("user/"+t+"/order/"+r+"/abandon",{},n);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();t.abandonOrder=h;var g=function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(t,r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("accomplishOrder"),n={Authorization:"Bearer "+uni.getStorageSync("token")},e.next=4,i.default.post("user/"+t+"/order/"+r+"/finish",{},n);case 4:return a=e.sent,console.log(a.error_msg),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();t.accomplishOrder=g},"7e21":function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,".tui-popup-list[data-v-58b6c734]{z-index:1;transition:all .3s ease-in-out;opacity:0;visibility:hidden}.tui-flex-end[data-v-58b6c734]{width:100%;display:flex;justify-content:flex-end}.tui-triangle[data-v-58b6c734]{position:absolute;width:0;height:0;border-style:solid;z-index:997}.tui-popup-mask[data-v-58b6c734]{position:fixed;top:0;left:0;right:0;bottom:0;z-index:995;transition:all .3s ease-in-out;opacity:0;visibility:hidden}.tui-popup-show[data-v-58b6c734]{opacity:1;visibility:visible}.tui-z_index[data-v-58b6c734]{z-index:996}",""]),e.exports=t},"934d":function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,'.user-chat-list[data-v-3a728c83]{padding:%?20?% 0}.user-chat-list>uni-image[data-v-3a728c83]{width:%?80?%!important;height:%?80?%!important;\n\t/* border-radius: 100%; */flex-shrink:0;margin:0 %?10?%}.user-chat-list-body[data-v-3a728c83]{position:relative;background:#f4f4f4;padding:%?25?%;margin-left:%?20?%;border-radius:%?20?%;margin-right:%?100?%}.user-chat-list-body[data-v-3a728c83]:after{position:absolute;left:%?-30?%;right:0;top:%?30?%;content:"";width:0;height:0;border:%?16?% solid #f4f4f4;border-color:transparent #f4f4f4 transparent transparent}.user-chat-me[data-v-3a728c83]{justify-content:flex-end}.user-chat-me .user-chat-list-body[data-v-3a728c83]{margin-right:%?20?%;margin-left:%?100?%}.user-chat-me .user-chat-list-body[data-v-3a728c83]:after{left:auto;right:%?-30?%;border-color:transparent transparent transparent #f4f4f4}.user-chat-list-body>uni-image[data-v-3a728c83]{max-width:%?150?%;max-height:%?200?%}.user-chat-time[data-v-3a728c83]{padding:%?50?% 0;color:#a2a2a2;font-size:%?24?%}',""]),e.exports=t},"94bd":function(e,t,r){"use strict";var n;r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){return n}));var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-uni-button",{staticClass:"tui-btn",class:[e.plain?"tui-"+e.type+"-outline":"tui-btn-"+(e.type||"primary"),e.getDisabledClass(e.disabled,e.type,e.plain),e.getShapeClass(e.shape,e.plain),e.getShadowClass(e.type,e.shadow,e.plain)],style:{width:e.width,height:e.height,lineHeight:e.height,fontSize:e.size+"rpx",margin:e.margin},attrs:{"hover-class":e.getHoverClass(e.disabled,e.type,e.plain),loading:e.loading,"open-type":e.openType,disabled:e.disabled},on:{getuserinfo:function(t){arguments[0]=t=e.$handleEvent(t),e.bindgetuserinfo.apply(void 0,arguments)},click:function(t){arguments[0]=t=e.$handleEvent(t),e.handleClick.apply(void 0,arguments)}}},[e._t("default")],2)},i=[]},a34d:function(e,t,r){"use strict";var n=r("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.getChat=t.createChat=t.pushMessage=t.createOrder=t.getOrder=t.getContact=void 0,r("96cf");var a=n(r("1da1")),i=n(r("4622")),o=n(r("46ee")),u=r("13b4"),d=function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={Authorization:"Bearer "+uni.getStorageSync("token")},e.next=3,i.default.get("need/get_contact",t,r);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.getContact=d;var s=function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={Authorization:"Bearer "+uni.getStorageSync("token")},e.next=3,i.default.get("order/get",t,r);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.getOrder=s;var c=function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={Authorization:"Bearer "+uni.getStorageSync("token")},console.log(t),e.next=4,i.default.post("order",t,r);case 4:return n=e.sent,console.log("createOrder "+n.error_msg),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.createOrder=c;var l=function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={Authorization:"Bearer "+uni.getStorageSync("token")},i.default.setLoading(!1),e.next=4,i.default.post("chat/push",t,r);case 4:return n=e.sent,i.default.setLoading(!0),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.pushMessage=l;var f=function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={Authorization:"Bearer "+uni.getStorageSync("token")},e.next=3,i.default.post("chat/create",t,r);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.createChat=f;var p=function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(t,r){var n,a,d,s,c,l,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={Authorization:"Bearer "+uni.getStorageSync("token")},e.next=3,i.default.get("chat/"+t,{},n);case 3:return a=e.sent,d={},a&&(s=r.id==a.from_user_id?a.to_user_id:a.from_user_id,c=o.default.gettime.gettime(new Date),l="",f=a.message_list,d={id:a.chatroom_id,fid:s,fromId:a.from_user_id,toId:a.to_user_id,afterTime:+new Date(a.afterTime),userpic:a.from_user_id==r.id?u.picUrl+a.to_user_pic:u.picUrl+a.from_user_pic,username:a.from_user_id==r.id?a.to_user_name:a.from_user_name,time:c,name:a.from_user_id==r.id?a.to_user:a.from_user,message:l,noreadnum:0,messages:f}),e.abrupt("return",d);case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();t.getChat=p},a5e2:function(e,t,r){var n=r("acf7");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=r("4f06").default;a("711faa56",n,!0,{sourceMap:!1,shadowMode:!1})},ace0:function(e,t,r){"use strict";r.r(t);var n=r("e3be"),a=r.n(n);for(var i in n)"default"!==i&&function(e){r.d(t,e,(function(){return n[e]}))}(i);t["default"]=a.a},acf7:function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,'.tui-btn-primary[data-v-4c99c476]{background:#5677fc!important;color:#fff}.tui-shadow-primary[data-v-4c99c476]{box-shadow:0 %?10?% %?14?% 0 rgba(86,119,252,.2)}.tui-btn-danger[data-v-4c99c476]{background:#eb0909!important;color:#fff}.tui-shadow-danger[data-v-4c99c476]{box-shadow:0 %?10?% %?14?% 0 rgba(235,9,9,.2)}.tui-btn-warning[data-v-4c99c476]{background:#fc872d!important;color:#fff}.tui-shadow-warning[data-v-4c99c476]{box-shadow:0 %?10?% %?14?% 0 rgba(252,135,45,.2)}.tui-btn-green[data-v-4c99c476]{background:#35b06a!important;color:#fff}.tui-shadow-green[data-v-4c99c476]{box-shadow:0 %?10?% %?14?% 0 rgba(53,176,106,.2)}.tui-btn-blue[data-v-4c99c476]{background:#007aff!important;color:#fff}.tui-shadow-blue[data-v-4c99c476]{box-shadow:0 %?10?% %?14?% 0 rgba(0,122,255,.2)}.tui-btn-white[data-v-4c99c476]{background:#fff!important;color:#333!important}.tui-btn-gray[data-v-4c99c476]{background:#bfbfbf!important;color:#fff!important}.tui-btn-black[data-v-4c99c476]{background:#333!important;color:#fff!important}.tui-shadow-gray[data-v-4c99c476]{box-shadow:0 %?10?% %?14?% 0 hsla(0,0%,74.9%,.2)}.tui-hover-gray[data-v-4c99c476]{background:#f7f7f9!important}.tui-black-hover[data-v-4c99c476]{background:#555!important;color:#e5e5e5!important}\n\n/* button start*/.tui-btn[data-v-4c99c476]{width:100%;position:relative;border:0!important;border-radius:%?6?%;padding-left:0;padding-right:0;overflow:visible}.tui-btn[data-v-4c99c476]::after{content:"";position:absolute;width:200%;height:200%;-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:scale(.5) translateZ(0);transform:scale(.5) translateZ(0);box-sizing:border-box;left:0;top:0;border-radius:%?12?%;border:0}.tui-btn-white[data-v-4c99c476]::after{border:%?1?% solid #bfbfbf}.tui-white-hover[data-v-4c99c476]{background:#e5e5e5!important;color:#2e2e2e!important}.tui-dark-disabled[data-v-4c99c476]{opacity:.6!important;color:#fafbfc!important}.tui-dark-disabled-outline[data-v-4c99c476]{opacity:.5!important}.tui-gray-disabled[data-v-4c99c476]{background:#f3f3f3!important;color:#919191!important;box-shadow:none}.tui-outline-hover[data-v-4c99c476]{opacity:.5}.tui-primary-hover[data-v-4c99c476]{background:#4a67d6!important;color:#e5e5e5!important}.tui-primary-outline[data-v-4c99c476]::after{border:%?1?% solid #5677fc!important}.tui-primary-outline[data-v-4c99c476]{color:#5677fc!important;background:transparent}.tui-danger-hover[data-v-4c99c476]{background:#c80808!important;color:#e5e5e5!important}.tui-danger-outline[data-v-4c99c476]{color:#eb0909!important;background:transparent}.tui-danger-outline[data-v-4c99c476]::after{border:%?1?% solid #eb0909!important}.tui-warning-hover[data-v-4c99c476]{background:#d67326!important;color:#e5e5e5!important}.tui-warning-outline[data-v-4c99c476]{color:#fc872d!important;background:transparent}.tui-warning-outline[data-v-4c99c476]::after{border:1px solid #fc872d!important}.tui-green-hover[data-v-4c99c476]{background:#2d965a!important;color:#e5e5e5!important}.tui-green-outline[data-v-4c99c476]{color:#35b06a!important;background:transparent}.tui-green-outline[data-v-4c99c476]::after{border:%?1?% solid #35b06a!important}.tui-blue-hover[data-v-4c99c476]{background:#0062cc!important;color:#e5e5e5!important}.tui-blue-outline[data-v-4c99c476]{color:#007aff!important;background:transparent}.tui-blue-outline[data-v-4c99c476]::after{border:%?1?% solid #007aff!important}\n.tui-btn-gradual[data-v-4c99c476]{background:linear-gradient(90deg,#ff5926,#f00e2c)!important;color:#fff!important}.tui-shadow-gradual[data-v-4c99c476]{box-shadow:0 %?10?% %?14?% 0 rgba(235,9,9,.15)}\n.tui-gray-hover[data-v-4c99c476]{background:#a3a3a3!important;color:#898989}\n.tui-gradual-hover[data-v-4c99c476]{background:linear-gradient(90deg,#d74620,#cd1225)!important;color:#fff!important}\n.tui-gray-outline[data-v-4c99c476]{color:#999!important;background:transparent!important}.tui-white-outline[data-v-4c99c476]{color:#fff!important;background:transparent!important}.tui-black-outline[data-v-4c99c476]{background:transparent!important;color:#333!important}.tui-gray-outline[data-v-4c99c476]::after{border:%?1?% solid #ccc!important}.tui-white-outline[data-v-4c99c476]::after{border:1px solid #fff!important}.tui-black-outline[data-v-4c99c476]::after{border:1px solid #333!important}\n\n/*圆角 */.tui-fillet[data-v-4c99c476]{border-radius:%?50?%}.tui-btn-white.tui-fillet[data-v-4c99c476]::after{border-radius:%?98?%}.tui-outline-fillet[data-v-4c99c476]::after{border-radius:%?98?%}\n\n/*平角*/.tui-rightAngle[data-v-4c99c476]{border-radius:0}.tui-btn-white.tui-rightAngle[data-v-4c99c476]::after{border-radius:0}.tui-outline-rightAngle[data-v-4c99c476]::after{border-radius:0}',""]),e.exports=t},ae68:function(e,t,r){"use strict";r.r(t);var n=r("2400"),a=r.n(n);for(var i in n)"default"!==i&&function(e){r.d(t,e,(function(){return n[e]}))}(i);t["default"]=a.a},bff5:function(e,t,r){"use strict";r.r(t);var n=r("94bd"),a=r("d3a2");for(var i in a)"default"!==i&&function(e){r.d(t,e,(function(){return a[e]}))}(i);r("5194");var o,u=r("f0c5"),d=Object(u["a"])(a["default"],n["b"],n["c"],!1,null,"4c99c476",null,!1,n["a"],o);t["default"]=d.exports},c671:function(e,t,r){"use strict";var n=r("0633"),a=r.n(n);a.a},c6ae:function(e,t,r){"use strict";var n=r("c933"),a=r.n(n);a.a},c881:function(e,t,r){"use strict";var n=r("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.needToOrderlist=t.getOrderDetail=void 0,r("96cf");var a=n(r("1da1")),i=n(r("4622")),o=(n(r("46ee")),r("13b4"),function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("getOrderDetail"),r={Authorization:"Bearer "+uni.getStorageSync("token")},e.next=4,i.default.get("order/"+t,{},r);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());t.getOrderDetail=o;var u=function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("needToOrderlist"),r={Authorization:"Bearer "+uni.getStorageSync("token")},e.next=4,i.default.get("need/"+t+"/order",{},r);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.needToOrderlist=u},c933:function(e,t,r){var n=r("934d");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=r("4f06").default;a("7806f6f5",n,!0,{sourceMap:!1,shadowMode:!1})},cca1:function(e,t,r){var n=r("24fb");t=n(!1),t.push([e.i,".user-chat-bottom[data-v-69ea4013]{position:fixed;bottom:0;left:0;right:0;height:%?120?%;padding:0 %?20?%;background:#fff;border-top:%?1?% solid #eee}.user-chat-bottom>uni-input[data-v-69ea4013]{flex:1;margin-right:%?20?%;padding:%?10?% %?20?%;border-radius:%?10?%;background:#f7f7f7}.user-chat-bottom>uni-view[data-v-69ea4013]{width:%?80?%;font-size:%?45?%}",""]),e.exports=t},cced:function(e,t,r){"use strict";r.r(t);var n=r("5b36"),a=r("d5b5");for(var i in a)"default"!==i&&function(e){r.d(t,e,(function(){return a[e]}))}(i);r("e0cb");var o,u=r("f0c5"),d=Object(u["a"])(a["default"],n["b"],n["c"],!1,null,"69ea4013",null,!1,n["a"],o);t["default"]=d.exports},d3a2:function(e,t,r){"use strict";r.r(t);var n=r("ec49"),a=r.n(n);for(var i in n)"default"!==i&&function(e){r.d(t,e,(function(){return n[e]}))}(i);t["default"]=a.a},d403:function(e,t,r){var n=r("cca1");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=r("4f06").default;a("44ab10be",n,!0,{sourceMap:!1,shadowMode:!1})},d5b5:function(e,t,r){"use strict";r.r(t);var n=r("2908"),a=r.n(n);for(var i in n)"default"!==i&&function(e){r.d(t,e,(function(){return n[e]}))}(i);t["default"]=a.a},d72c:function(e,t,r){"use strict";var n;r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){return n}));var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-uni-view",{staticClass:"user-chat-item animated fadeIn fast"},[e.item.gstime?r("v-uni-view",{staticClass:"user-chat-time u-f-ajc"},[e._v(e._s(e.item.gstime))]):e._e(),r("v-uni-view",{staticClass:"user-chat-list u-f",class:{"user-chat-me":e.item.isme}},[e.item.isme?e._e():r("v-uni-image",{attrs:{src:e.item.userpic,mode:"widthFix","lazy-load":!0},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.navUserInfo.apply(void 0,arguments)}}}),r("v-uni-view",{staticClass:"user-chat-list-body"},["text"==e.item.type?r("v-uni-text",[e._v(e._s(e.item.message))]):e._e(),"img"==e.item.type?r("v-uni-image",{attrs:{src:e.item.message,mode:"widthFix","lazy-load":!0}}):e._e()],1),e.item.isme?r("v-uni-image",{attrs:{src:e.item.userpic,mode:"widthFix","lazy-load":!0},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.navUserInfo.apply(void 0,arguments)}}}):e._e()],1)],1)},i=[]},da68:function(e,t,r){var n=r("2349");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=r("4f06").default;a("10d97893",n,!0,{sourceMap:!1,shadowMode:!1})},e0cb:function(e,t,r){"use strict";var n=r("d403"),a=r.n(n);a.a},e3be:function(e,t,r){"use strict";var n=r("4ea4");r("e25e"),r("ac1f"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r("96cf");var a=n(r("1da1")),i=n(r("5530")),o=n(r("cced")),u=n(r("46ee")),d=n(r("55fc")),s=r("26cb"),c=r("a34d"),l=r("7d2f"),f=(r("13b4"),n(r("e143")),r("c881")),p=r("20ce"),h={components:{userChatBottom:o.default,userChatList:d.default},computed:(0,i.default)((0,i.default)({},(0,s.mapState)(["chatList","userInfo","msgIndex","msgPage"])),(0,s.mapGetters)(["currentChatMsgs"])),data:function(){return{scrollTop:0,triggered:!1,index:-1,style:{contentH:0,itemH:0},list:[],cId:0,socket:null,fid:void 0,isShow:!1,show:!1,need:{need_id:0},order:{order_id:0,state:void 0},timer:null}},onShow:function(){this.isShow=!0},beforeDestroy:function(){this.isShow=!1,this.setIndex(-1),this.setMsgPage(1),this.clear()},onPullDownRefresh:function(){this.initdata()},onLoad:function(e){var t=this;return(0,a.default)(regeneratorRuntime.mark((function r(){var n,a,i,o,u,d,s,l,f,p,h;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.index&&(t.setIndex(parseInt(e.index)),t.index=e.index,t.chatList[t.msgIndex].name?(n=t.chatList[t.msgIndex].username+"（"+t.chatList[t.msgIndex].name+"）",uni.setNavigationBarTitle({title:n})):(a=t.chatList[t.msgIndex].username,uni.setNavigationBarTitle({title:a})),uni.setNavigationBarColor({frontColor:"#000000",backgroundColor:"#fffae1",animation:{duration:500,timingFunc:"easeInOut"}})),t.fid=e.fid,i=parseInt(e.fid),o=!0,e.index){r.next=34;break}u=0;case 6:if(!(u<t.chatList.length)){r.next=17;break}if(t.chatList[u].fid!==i){r.next=14;break}return t.index=u,t.setIndex(u),o=!1,t.chatList[t.msgIndex].name?(d=t.chatList[t.msgIndex].username+"（"+t.chatList[t.msgIndex].name+"）",uni.setNavigationBarTitle({title:d})):(s=t.chatList[t.msgIndex].username,uni.setNavigationBarTitle({title:s})),t.cId=t.chatList[u].id,r.abrupt("return");case 14:u++,r.next=6;break;case 17:if(!o){r.next=32;break}return t.fid=i,r.next=21,(0,c.createChat)({from_user_id:t.userInfo.id,to_user_id:parseInt(i),chatroom_name:""});case 21:return l=r.sent,r.next=24,(0,c.getChat)(l.id,t.userInfo);case 24:f=r.sent,console.log(f),t.cId=l.id,console.log(t.cId),t.setIndex(0),t.index=0,t.addChatList(f),f.name?(p=f.username+"（"+f.name+"）",uni.setNavigationBarTitle({title:p})):(h=f.username,uni.setNavigationBarTitle({title:h}));case 32:r.next=36;break;case 34:t.fid=t.chatList[e.index].fid,t.cId=t.chatList[e.index].id;case 36:t.initorder();case 37:case"end":return r.stop()}}),r)})))()},onReady:function(){this.getdata(),this.initdata(),this.pageToBottom(!0),this.initorder(),this.initdata()},onNavigationBarButtonTap:function(e){switch(e.index){case 0:this.goToUserInfo(this.chatList[this.msgIndex].fid);break}},watch:{currentChatMsgs:function(e){this.triggered||this.pageToBottom(!0)}},methods:(0,i.default)((0,i.default)({},(0,s.mapMutations)(["setChatMessage","setIsPaper","addChatList","setIndex","setMsgPage","addChatMessage","addNoreadMessage"])),{},{initdata:function(){var e=this;return(0,a.default)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:try{r=uni.getSystemInfoSync(),n=200,e.style.contentH=r.windowHeight-uni.upx2px(n),uni.stopPullDownRefresh()}catch(a){}case 1:case"end":return t.stop()}}),t)})))()},refresh:function(){var e=this;this.timer=setInterval((function(){setTimeout(e.trym,0)}),5e3)},createOrderAndRefresh:function(){if(5===this.userInfo.type){var e={enterprise_id:this.userInfo.id,expert_id:this.fid,need_id:this.need.need_id};(0,c.createOrder)(e)}else if(4===this.userInfo.type){var t={enterprise_id:this.fid,expert_id:this.userInfo.id,need_id:this.need.need_id};(0,c.createOrder)(t)}this.initorder(),this.sendm("我已向您发起订单，需求名为："+this.need.title)},acceptOrderAndRefresh:function(){(0,l.acceptOrder)(this.userInfo.id,this.order.order_id),this.initorder(),this.sendm("我已接受您的订单，需求名为："+this.need.title)},rejectOrderAndRefresh:function(){(0,l.rejectOrder)(this.userInfo.id,this.order.order_id),this.initorder(),this.sendm("我已拒绝您的订单，需求名为："+this.need.title)},accomplishOrderAndRefresh:function(){if(5===this.userInfo.type){var e={enterprise_id:this.userInfo.id,expert_id:this.fid,need_id:this.need.need_id};(0,l.accomplishOrder)(e.enterprise_id,this.order.order_id)}else if(4===this.userInfo.type){var t={enterprise_id:this.fid,expert_id:this.userInfo.id,need_id:this.need.need_id};(0,l.accomplishOrder)(t.enterprise_id,this.order.order_id)}this.initorder(),this.sendm("我们的订单已完成，需求名为："+this.need.title)},initorder:function(){var e=this;return(0,a.default)(regeneratorRuntime.mark((function t(){var r,n,a,i,o,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(5!==e.userInfo.type){t.next=14;break}return r={enterprise_id:e.userInfo.id,expert_id:e.fid},t.next=4,(0,c.getContact)(r);case 4:if(n=t.sent,!n){t.next=11;break}return t.next=8,(0,p.getNeedDetail)(n.need_id);case 8:e.need=t.sent,t.next=12;break;case 11:e.need={need_id:0};case 12:t.next=26;break;case 14:if(4!==e.userInfo.type){t.next=26;break}return a={enterprise_id:e.fid,expert_id:e.userInfo.id},t.next=18,(0,c.getContact)(a);case 18:if(i=t.sent,!i){t.next=25;break}return t.next=22,(0,p.getNeedDetail)(i.need_id);case 22:e.need=t.sent,t.next=26;break;case 25:e.need={need_id:0};case 26:return o=4===e.userInfo.type?{enterprise_id:e.fid,expert_id:e.userInfo.id,need_id:e.need.need_id}:{enterprise_id:e.userInfo.id,expert_id:e.fid,need_id:e.need.need_id},t.next=29,(0,c.getOrder)(o);case 29:if(u=t.sent,console.log(u),!(u.order_id>0)){t.next=37;break}return t.next=34,(0,f.getOrderDetail)(u.order_id);case 34:e.order=t.sent,t.next=39;break;case 37:e.order.state=void 0,e.order.order_id=0;case 39:case"end":return t.stop()}}),t)})))()},sendm:function(e){var t=this;return(0,a.default)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.submit(e);case 1:case"end":return r.stop()}}),r)})))()},scrollTopHandle:function(){var e=this;this.triggered?setTimeout((function(){e.msgPage>e.currentChatMsgs.length/20&&uni.showToast({title:"没有更多消息了!",icon:"none"}),e.triggered=!1}),200):(this.triggered=!0,this.setMsgPage())},pageToBottom:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=uni.createSelectorQuery().in(this),n=r.selectAll(".chat-item");0!==this.currentChatMsgs.length&&this.$nextTick((function(){n.fields({size:!0},(function(r){if(r){if(t)for(var n=0;n<r.length;n++)e.style.itemH+=r[n].height;else e.style.itemH+=r[r.length-1].height;e.scrollTop=e.style.itemH>e.style.contentH?e.style.itemH:0}})).exec()}))},openmenu:function(){this.show?this.show=!1:this.show=!0},clear:function(){clearInterval(this.timer),this.timer=null},goToUserInfo:function(e){uni.navigateTo({url:"../../pages/user-space/user-space?uid="+e})},goToNeedDetail:function(e){uni.navigateTo({url:"../need-detail/detail?id="+e})},goToOrderDetail:function(e){uni.navigateTo({url:"../order-detail/order-detail?id="+e})},getdata:function(){this.chatList.length},submit:function(e){var t=this;return(0,a.default)(regeneratorRuntime.mark((function r(){var n,a,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=(new Date).getTime(),""!==e){r.next=4;break}return uni.showToast({title:"消息不能为空",icon:"none"}),r.abrupt("return");case 4:return r.next=6,(0,c.pushMessage)({cId:t.chatList[t.msgIndex].id,fromId:t.userInfo.id,toId:t.chatList[t.msgIndex].fid,content:e});case 6:if(a=r.sent,!a.code||0===a.code){r.next=10;break}return uni.showToast({title:"消息发送失败!",icon:"none"}),r.abrupt("return");case 10:i={fromId:t.userInfo.id,toId:t.fid,index:t.index,isme:!0,userpic:t.userInfo.userpic,type:"text",message:e,time:u.default.gettime.gettime(n),gstime:n,created_at:n},t.addChatMessage(i),t.pageToBottom(!0);case 13:case"end":return r.stop()}}),r)})))()}})};t.default=h},ec49:function(e,t,r){"use strict";r("a9e3"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n={name:"tuiButton",props:{type:{type:String,default:"primary"},shadow:{type:Boolean,default:!1},width:{type:String,default:"100%"},height:{type:String,default:"96rpx"},size:{type:Number,default:32},margin:{type:String,default:"0"},shape:{type:String,default:"square"},plain:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},disabledGray:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},openType:{type:String,default:""},index:{type:[Number,String],default:0}},methods:{handleClick:function(){if(this.disabled)return!1;this.$emit("click",{index:Number(this.index)})},bindgetuserinfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.detail,r=void 0===t?{}:t;this.$emit("getuserinfo",r)},getShadowClass:function(e,t,r){var n="";return t&&"white"!=e&&!r&&(n="tui-shadow-"+e),n},getDisabledClass:function(e,t,r){var n="";if(e&&"white"!=t){var a=this.disabledGray?"tui-gray-disabled":"tui-dark-disabled";n=r?"tui-dark-disabled-outline":a}return n},getShapeClass:function(e,t){var r="";return"circle"==e?r=t?"tui-outline-fillet":"tui-fillet":"rightAngle"==e&&(r=t?"tui-outline-rightAngle":"tui-rightAngle"),r},getHoverClass:function(e,t,r){var n="";return e||(n=r?"tui-outline-hover":"tui-"+(t||"primary")+"-hover"),n}}};t.default=n},f728:function(e,t,r){"use strict";var n=r("da68"),a=r.n(n);a.a},f857:function(e,t,r){"use strict";var n;r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return i})),r.d(t,"a",(function(){return n}));var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-uni-view",{staticClass:"tui-list-class tui-list-cell",class:[e.arrow?"tui-cell-arrow":"",e.arrow&&e.arrowRight?"":"tui-arrow-right",e.unlined?"tui-cell-unlined":"",e.lineLeft?"tui-line-left":"",e.lineRight?"tui-line-right":"",e.arrow&&e.arrowColor?"tui-arrow-"+e.arrowColor:"",e.radius?"tui-radius":""],style:{backgroundColor:e.backgroundColor,fontSize:e.size+"rpx",color:e.color,padding:e.padding},attrs:{"hover-class":e.hover?"tui-cell-hover":"","hover-stay-time":150},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handleClick.apply(void 0,arguments)}}},[e._t("default")],2)},i=[]},fe6b:function(e,t,r){"use strict";r.r(t);var n=r("f857"),a=r("0b0b");for(var i in a)"default"!==i&&function(e){r.d(t,e,(function(){return a[e]}))}(i);r("f728");var o,u=r("f0c5"),d=Object(u["a"])(a["default"],n["b"],n["c"],!1,null,"54473b38",null,!1,n["a"],o);t["default"]=d.exports}}]);