(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-chat-user-chat"],{"0384":function(t,e,r){"use strict";r.d(e,"b",(function(){return a})),r.d(e,"c",(function(){return i})),r.d(e,"a",(function(){return n}));var n={tuiButton:r("bff5").default,tuiBubblePopup:r("1b6c").default,tuiListCell:r("fe6b").default,tuiIcon:r("3e6d").default},a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-uni-view",[t.need&&t.need.need_id?r("tui-button",{attrs:{size:28,plain:!0},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.openmenu.apply(void 0,arguments)}}},[t._v("需求标题："+t._s(this.need.title))]):t._e(),"5"==t.userInfo.type&&t.need?[r("tui-bubble-popup",{attrs:{show:t.show,mask:!0,position:"absolute",width:"370rpx",translateY:"0rpx",triangleTop:"-50rpx",borderWidth:"0"},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.openmenu()}}},[r("tui-list-cell",{attrs:{hover:!0,arrow:!0,backgroundColor:"#dcdcdc"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goToNeedDetail(t.need.need_id)}}},[r("tui-icon",{attrs:{name:"search"}}),t._v("查看需求")],1)],1),0==t.order.order_id?r("v-uni-view",[r("tui-bubble-popup",{attrs:{show:t.show,mask:!1,position:"absolute",width:"370rpx",translateY:"0rpx",translateX:"380rpx",triangleTop:"-20rpx",borderWidth:"0"},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.openmenu()}}},[r("tui-list-cell",{attrs:{hover:!0,arrow:!1,backgroundColor:"#dcdcdc"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.createOrderAndRefresh()}}},[r("tui-icon",{attrs:{name:"order"}}),t._v("发起订单")],1)],1)],1):t._e(),0!=t.order.order_id?r("v-uni-view",[r("tui-bubble-popup",{attrs:{show:t.show,mask:!1,position:"absolute",width:"370rpx",translateY:"0rpx",translateX:"380rpx",triangleTop:"-20rpx",borderWidth:"0"},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.openmenu()}}},[r("tui-list-cell",{attrs:{hover:!0,arrow:!0,backgroundColor:"#dcdcdc"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goToOrderDetail(t.order.order_id)}}},[r("tui-icon",{attrs:{name:"search"}}),t._v("查看订单")],1)],1)],1):t._e(),0!=t.order.order_id&&1==t.order.state?r("tui-bubble-popup",{attrs:{show:t.show,mask:!0,position:"absolute",width:"370rpx",translateY:"120rpx",triangleTop:"-50rpx",borderWidth:"0"},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.openmenu()}}},[r("tui-list-cell",{attrs:{hover:!0,arrow:!1,backgroundColor:"#dcdcdc"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.accomplishOrderAndRefresh()}}},[r("tui-icon",{attrs:{name:"check"}}),t._v("完成订单")],1)],1):t._e()]:"4"==t.userInfo.type&&t.need?[r("tui-bubble-popup",{attrs:{show:t.show,mask:!0,position:"absolute",width:"370rpx",translateY:"0rpx",triangleTop:"-50rpx",borderWidth:"0"},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.openmenu()}}},[r("tui-list-cell",{attrs:{hover:!0,arrow:!0,backgroundColor:"#dcdcdc"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goToNeedDetail(t.need.need_id)}}},[r("tui-icon",{attrs:{name:"search"}}),t._v("查看需求")],1)],1),0!=t.order.order_id?[r("tui-bubble-popup",{attrs:{show:t.show,mask:!1,position:"absolute",width:"370rpx",translateY:"0rpx",translateX:"380rpx",triangleTop:"-20rpx",borderWidth:"0"},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.openmenu()}}},[r("tui-list-cell",{attrs:{hover:!0,arrow:!0,backgroundColor:"#dcdcdc"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goToOrderDetail(t.order.order_id)}}},[r("tui-icon",{attrs:{name:"search"}}),t._v("查看订单")],1)],1),0==t.order.state?r("v-uni-view",[r("tui-bubble-popup",{attrs:{show:t.show,mask:!0,position:"absolute",width:"370rpx",translateY:"120rpx",triangleTop:"-50rpx",borderWidth:"0"},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.openmenu()}}},[r("tui-list-cell",{attrs:{hover:!0,arrow:!1,backgroundColor:"#dcdcdc"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.acceptOrderAndRefresh()}}},[r("tui-icon",{attrs:{name:"check"}}),t._v("接受订单")],1)],1),r("tui-bubble-popup",{attrs:{show:t.show,mask:!1,position:"absolute",width:"370rpx",translateY:"120rpx",translateX:"380rpx",triangleTop:"-20rpx",borderWidth:"0"},on:{close:function(e){arguments[0]=e=t.$handleEvent(e),t.openmenu()}}},[r("tui-list-cell",{attrs:{hover:!0,arrow:!1,backgroundColor:"#dcdcdc"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.rejectOrderAndRefresh()}}},[r("tui-icon",{attrs:{name:"shut"}}),t._v("拒绝订单")],1)],1)],1):t._e()]:t._e()]:t._e(),r("v-uni-scroll-view",{style:{height:t.style.contentH+"px"},attrs:{id:"scrollview","scroll-y":!0,"scroll-top":t.scrollTop,"scroll-with-animation":!0,"refresher-enabled":!0,"refresher-triggered":t.triggered},on:{refresherrefresh:function(e){arguments[0]=e=t.$handleEvent(e),t.scrollTopHandle.apply(void 0,arguments)}}},[t._l(t.currentChatMsgs,(function(e,n){return[r("v-uni-view",{key:n+"_0",staticClass:"chat-item"},[r("user-chat-list",{attrs:{item:e,index:n},on:{goToUserInfo:function(e){arguments[0]=e=t.$handleEvent(e),t.goToUserInfo.apply(void 0,arguments)}}})],1)]}))],2),r("user-chat-bottom",{on:{submit:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}})],2)},i=[]},"0633":function(t,e,r){var n=r("7e21");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=r("4f06").default;a("66f10f3e",n,!0,{sourceMap:!1,shadowMode:!1})},"0b0b":function(t,e,r){"use strict";r.r(e);var n=r("56af"),a=r.n(n);for(var i in n)"default"!==i&&function(t){r.d(e,t,(function(){return n[t]}))}(i);e["default"]=a.a},"1b6c":function(t,e,r){"use strict";r.r(e);var n=r("3ba4"),a=r("ae68");for(var i in a)"default"!==i&&function(t){r.d(e,t,(function(){return a[t]}))}(i);r("c671");var o,u=r("f0c5"),d=Object(u["a"])(a["default"],n["b"],n["c"],!1,null,"58b6c734",null,!1,n["a"],o);e["default"]=d.exports},"20ce":function(t,e,r){"use strict";(function(t){var n=r("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.createContact=e.getNeedDetail=void 0,r("96cf");var a=n(r("1da1")),i=n(r("4622")),o=(n(r("46ee")),r("13b4")),u=function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(r){var n,a,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t("log","id is"+r," at api/need-detail.js:9"),t("log","getNeedDetail"," at api/need-detail.js:10"),n={Authorization:"Bearer "+uni.getStorageSync("token")},e.next=5,i.default.get("need/"+r,{},n);case 5:if(a=e.sent,a&&a.order&&a.order.length)for(u=0;u<a.order.length;u++)a.order[u].expert_icon=o.picUrl+a.order[u].expert_icon;return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();e.getNeedDetail=u;var d=function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={Authorization:"Bearer "+uni.getStorageSync("token")},e.next=3,i.default.post("need/contact",r,n);case 3:return a=e.sent,t("log",a.error_msg," at api/need-detail.js:39"),e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();e.createContact=d}).call(this,r("0de9")["log"])},2349:function(t,e,r){var n=r("24fb");e=n(!1),e.push([t.i,'.tui-list-cell[data-v-54473b38]{position:relative;width:100%;box-sizing:border-box}.tui-radius[data-v-54473b38]{border-radius:%?6?%;overflow:hidden}.tui-cell-hover[data-v-54473b38]{background-color:#f1f1f1!important}.tui-list-cell[data-v-54473b38]::after{content:"";position:absolute;border-bottom:%?1?% solid #eaeef1;-webkit-transform:scaleY(.5) translateZ(0);transform:scaleY(.5) translateZ(0);-webkit-transform-origin:0 100%;transform-origin:0 100%;bottom:0;right:0;left:0}.tui-line-left[data-v-54473b38]::after{left:%?30?%!important}.tui-line-right[data-v-54473b38]::after{right:%?30?%!important}.tui-cell-unlined[data-v-54473b38]::after{border-bottom:0!important}.tui-cell-arrow[data-v-54473b38]::before{content:" ";height:10px;width:10px;border-width:2px 2px 0 0;border-color:silver;border-style:solid;-webkit-transform:matrix(.5,.5,-.5,.5,0,0);transform:matrix(.5,.5,-.5,.5,0,0);position:absolute;top:50%;margin-top:-6px;right:%?30?%}.tui-arrow-right[data-v-54473b38]::before{right:0!important}.tui-arrow-gray[data-v-54473b38]::before{border-color:#666!important}.tui-arrow-white[data-v-54473b38]::before{border-color:#fff!important}.tui-arrow-warning[data-v-54473b38]::before{border-color:#ff7900!important}.tui-arrow-success[data-v-54473b38]::before{border-color:#19be6b!important}.tui-arrow-danger[data-v-54473b38]::before{border-color:#eb0909!important}',""]),t.exports=e},"236a":function(t,e,r){"use strict";r.r(e);var n=r("0384"),a=r("ace0");for(var i in a)"default"!==i&&function(t){r.d(e,t,(function(){return a[t]}))}(i);var o,u=r("f0c5"),d=Object(u["a"])(a["default"],n["b"],n["c"],!1,null,"019b4292",null,!1,n["a"],o);e["default"]=d.exports},2400:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={name:"tuiBubblePopup",props:{width:{type:String,default:"300rpx"},radius:{type:String,default:"8rpx"},left:{type:String,default:"auto"},right:{type:String,default:"auto"},top:{type:String,default:"auto"},bottom:{type:String,default:"auto"},translateX:{type:String,default:"0"},translateY:{type:String,default:"0"},backgroundColor:{type:String,default:"#4c4c4c"},color:{type:String,default:"#fff"},borderWidth:{type:String,default:"12rpx"},direction:{type:String,default:"top"},triangleLeft:{type:String,default:"auto"},triangleRight:{type:String,default:"auto"},triangleTop:{type:String,default:"auto"},triangleBottom:{type:String,default:"auto"},position:{type:String,default:"fixed"},flexEnd:{type:Boolean,default:!1},mask:{type:Boolean,default:!0},maskBgColor:{type:String,default:"rgba(0, 0, 0, 0.4)"},show:{type:Boolean,default:!1}},methods:{handleClose:function(){this.show&&this.$emit("close",{})},stop:function(){return!1}}};e.default=n},2908:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{text:""}},methods:{submit:function(){this.$emit("submit",this.text),this.text=""}}};e.default=n},"311d":function(t,e,r){"use strict";r.r(e);var n=r("4cef"),a=r.n(n);for(var i in n)"default"!==i&&function(t){r.d(e,t,(function(){return n[t]}))}(i);e["default"]=a.a},"3ba4":function(t,e,r){"use strict";var n;r.d(e,"b",(function(){return a})),r.d(e,"c",(function(){return i})),r.d(e,"a",(function(){return n}));var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-uni-view",{class:{"tui-flex-end":t.flexEnd}},[r("v-uni-view",{staticClass:"tui-popup-list",class:{"tui-popup-show":t.show,"tui-z_index":t.show&&"relative"!=t.position},style:{width:t.width,backgroundColor:t.backgroundColor,borderRadius:t.radius,color:t.color,position:t.position,left:t.left,right:t.right,bottom:t.bottom,top:t.top,transform:"translate("+t.translateX+","+t.translateY+")"}},["top"==t.direction?r("v-uni-view",{staticClass:"tui-triangle",style:{borderWidth:t.borderWidth,borderColor:"transparent transparent "+t.backgroundColor+" transparent",left:t.triangleLeft,right:t.triangleRight,top:t.triangleTop,bottom:t.triangleBottom}}):t._e(),"bottom"==t.direction?r("v-uni-view",{staticClass:"tui-triangle",style:{borderWidth:t.borderWidth,borderColor:t.backgroundColor+"  transparent transparent transparent",left:t.triangleLeft,right:t.triangleRight,top:t.triangleTop,bottom:t.triangleBottom}}):t._e(),"left"==t.direction?r("v-uni-view",{staticClass:"tui-triangle",style:{borderWidth:t.borderWidth,borderColor:"transparent  "+t.backgroundColor+" transparent transparent",left:t.triangleLeft,right:t.triangleRight,top:t.triangleTop,bottom:t.triangleBottom}}):t._e(),"right"==t.direction?r("v-uni-view",{staticClass:"tui-triangle",style:{borderWidth:t.borderWidth,borderColor:"transparent transparent  transparent "+t.backgroundColor,left:t.triangleLeft,right:t.triangleRight,top:t.triangleTop,bottom:t.triangleBottom}}):t._e(),t._t("default")],2),t.mask?r("v-uni-view",{staticClass:"tui-popup-mask",class:{"tui-popup-show":t.show},style:{backgroundColor:t.maskBgColor},on:{touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.stop.apply(void 0,arguments)},click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleClose.apply(void 0,arguments)}}}):t._e()],1)},i=[]},"4cef":function(t,e,r){"use strict";(function(t){r("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={props:{item:Object,index:Number},methods:{navUserInfo:function(){t("log",this.item," at components/user-chat/user-chat-list.vue:29"),this.$emit("goToUserInfo",this.item.uid)}}};e.default=n}).call(this,r("0de9")["log"])},5194:function(t,e,r){"use strict";var n=r("a5e2"),a=r.n(n);a.a},"55fc":function(t,e,r){"use strict";r.r(e);var n=r("d72c"),a=r("311d");for(var i in a)"default"!==i&&function(t){r.d(e,t,(function(){return a[t]}))}(i);r("c6ae");var o,u=r("f0c5"),d=Object(u["a"])(a["default"],n["b"],n["c"],!1,null,"3a728c83",null,!1,n["a"],o);e["default"]=d.exports},"56af":function(t,e,r){"use strict";r("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={name:"tuiListCell",props:{arrow:{type:Boolean,default:!1},arrowColor:{type:String,default:""},hover:{type:Boolean,default:!0},unlined:{type:Boolean,default:!1},lineLeft:{type:Boolean,default:!0},lineRight:{type:Boolean,default:!1},padding:{type:String,default:"26rpx 30rpx"},backgroundColor:{type:String,default:"#fff"},size:{type:Number,default:28},color:{type:String,default:"#333"},radius:{type:Boolean,default:!1},arrowRight:{type:Boolean,default:!0},index:{type:Number,default:0}},methods:{handleClick:function(){this.$emit("click",{index:this.index})}}};e.default=n},"5b36":function(t,e,r){"use strict";var n;r.d(e,"b",(function(){return a})),r.d(e,"c",(function(){return i})),r.d(e,"a",(function(){return n}));var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-uni-view",{staticClass:"user-chat-bottom u-f-ac animated fadeInDown fast"},[r("v-uni-input",{attrs:{type:"text",placeholder:"请输入私信","confirm-type":"search"},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}}),r("v-uni-view",{staticClass:"icon iconfont icon-fabu u-f-ajc",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submit.apply(void 0,arguments)}}})],1)},i=[]},"7d2f":function(t,e,r){"use strict";(function(t){var n=r("4ea4");r("a4d3"),r("e01a"),r("d81d"),Object.defineProperty(e,"__esModule",{value:!0}),e.accomplishOrder=e.abandonOrder=e.rejectOrder=e.acceptOrder=e.getAllOrder=e.getPendingOrder=e.getCooperatingOrder=e.getFinishedOrder=void 0,r("96cf");var a=n(r("1da1")),i=n(r("4622")),o=r("13b4");function u(t){var e={state:t.state,order_id:t.order_id,entp_id:t.need.enterprise_id,entp_name:t.need.enterprise_name,description:t.need.enterprise_description,headpic:o.picUrl+t.need.enterprise_pic,exp_id:t.expert_id,exp_name:t.expert_name,exp_pic:o.picUrl+t.expert_pic,exp_des:t.expert_description,title:t.need.title,time:t.end_time,need_id:t.need.need_id};return"undefined"!==e.description&&null!==e.description&&""!==e.description||(e.description="Lux et veritas"),"undefined"!==e.time&&null!==e.time&&""!==e.time||(e.time=t.create_time),e}var d=function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t("log","getFinishedOrder"," at api/platform/order.js:36"),e.next=3,i.default.get("user/"+r+"/order/finished");case 3:return n=e.sent,n=n.data,n&&n.length&&(n=n.map((function(t){return u(t)}))),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();e.getFinishedOrder=d;var s=function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t("log","getCooperatingOrder"," at api/platform/order.js:52"),e.next=3,i.default.get("user/"+r+"/order/cooperating");case 3:return n=e.sent,n=n.data,n&&n.length&&(n=n.map((function(t){return u(t)}))),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();e.getCooperatingOrder=s;var c=function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t("log","getPendingOrder"," at api/platform/order.js:68"),e.next=3,i.default.get("user/"+r+"/order/pending");case 3:return n=e.sent,n=n.data,n&&n.length&&(n=n.map((function(t){return u(t)}))),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();e.getPendingOrder=c;var l=function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(r){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t("log","getAllOrder"," at api/platform/order.js:84"),e.next=3,i.default.get("user/"+r+"/order/all");case 3:return n=e.sent,t("log",n," at api/platform/order.js:86"),n=n.data,n&&n.length&&(n=n.map((function(t){return u(t)}))),e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();e.getAllOrder=l;var f=function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(r,n){var a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t("log","acceptOrder"," at api/platform/order.js:104"),a={Authorization:"Bearer "+uni.getStorageSync("token")},e.next=4,i.default.post("user/"+r+"/order/"+n+"/accept",{},a);case 4:return o=e.sent,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();e.acceptOrder=f;var p=function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(r,n){var a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t("log","rejectOrder"," at api/platform/order.js:119"),a={Authorization:"Bearer "+uni.getStorageSync("token")},e.next=4,i.default.post("user/"+r+"/order/"+n+"/refuse",{},a);case 4:return o=e.sent,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();e.rejectOrder=p;var h=function(){var t=(0,a.default)(regeneratorRuntime.mark((function t(e,r){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={Authorization:"Bearer "+uni.getStorageSync("token")},t.next=3,i.default.post("user/"+e+"/order/"+r+"/abandon",{},n);case 3:return a=t.sent,t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}();e.abandonOrder=h;var g=function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(r,n){var a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t("log","accomplishOrder"," at api/platform/order.js:134"),a={Authorization:"Bearer "+uni.getStorageSync("token")},e.next=4,i.default.post("user/"+r+"/order/"+n+"/finish",{},a);case 4:return o=e.sent,t("log",o.error_msg," at api/platform/order.js:137"),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();e.accomplishOrder=g}).call(this,r("0de9")["log"])},"7e21":function(t,e,r){var n=r("24fb");e=n(!1),e.push([t.i,".tui-popup-list[data-v-58b6c734]{z-index:1;transition:all .3s ease-in-out;opacity:0;visibility:hidden}.tui-flex-end[data-v-58b6c734]{width:100%;display:flex;justify-content:flex-end}.tui-triangle[data-v-58b6c734]{position:absolute;width:0;height:0;border-style:solid;z-index:997}.tui-popup-mask[data-v-58b6c734]{position:fixed;top:0;left:0;right:0;bottom:0;z-index:995;transition:all .3s ease-in-out;opacity:0;visibility:hidden}.tui-popup-show[data-v-58b6c734]{opacity:1;visibility:visible}.tui-z_index[data-v-58b6c734]{z-index:996}",""]),t.exports=e},"934d":function(t,e,r){var n=r("24fb");e=n(!1),e.push([t.i,'.user-chat-list[data-v-3a728c83]{padding:%?20?% 0}.user-chat-list>uni-image[data-v-3a728c83]{width:%?80?%!important;height:%?80?%!important;\n\t/* border-radius: 100%; */flex-shrink:0;margin:0 %?10?%}.user-chat-list-body[data-v-3a728c83]{position:relative;background:#f4f4f4;padding:%?25?%;margin-left:%?20?%;border-radius:%?20?%;margin-right:%?100?%}.user-chat-list-body[data-v-3a728c83]:after{position:absolute;left:%?-30?%;right:0;top:%?30?%;content:"";width:0;height:0;border:%?16?% solid #f4f4f4;border-color:transparent #f4f4f4 transparent transparent}.user-chat-me[data-v-3a728c83]{justify-content:flex-end}.user-chat-me .user-chat-list-body[data-v-3a728c83]{margin-right:%?20?%;margin-left:%?100?%}.user-chat-me .user-chat-list-body[data-v-3a728c83]:after{left:auto;right:%?-30?%;border-color:transparent transparent transparent #f4f4f4}.user-chat-list-body>uni-image[data-v-3a728c83]{max-width:%?150?%;max-height:%?200?%}.user-chat-time[data-v-3a728c83]{padding:%?50?% 0;color:#a2a2a2;font-size:%?24?%}',""]),t.exports=e},"94bd":function(t,e,r){"use strict";var n;r.d(e,"b",(function(){return a})),r.d(e,"c",(function(){return i})),r.d(e,"a",(function(){return n}));var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-uni-button",{staticClass:"tui-btn",class:[t.plain?"tui-"+t.type+"-outline":"tui-btn-"+(t.type||"primary"),t.getDisabledClass(t.disabled,t.type,t.plain),t.getShapeClass(t.shape,t.plain),t.getShadowClass(t.type,t.shadow,t.plain)],style:{width:t.width,height:t.height,lineHeight:t.height,fontSize:t.size+"rpx",margin:t.margin},attrs:{"hover-class":t.getHoverClass(t.disabled,t.type,t.plain),loading:t.loading,"open-type":t.openType,disabled:t.disabled},on:{getuserinfo:function(e){arguments[0]=e=t.$handleEvent(e),t.bindgetuserinfo.apply(void 0,arguments)},click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleClick.apply(void 0,arguments)}}},[t._t("default")],2)},i=[]},a34d:function(t,e,r){"use strict";(function(t){var n=r("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.getChat=e.createChat=e.pushMessage=e.createOrder=e.getOrder=e.getContact=void 0,r("96cf");var a=n(r("1da1")),i=n(r("4622")),o=n(r("46ee")),u=r("13b4"),d=function(){var t=(0,a.default)(regeneratorRuntime.mark((function t(e){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={Authorization:"Bearer "+uni.getStorageSync("token")},t.next=3,i.default.get("need/get_contact",e,r);case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();e.getContact=d;var s=function(){var t=(0,a.default)(regeneratorRuntime.mark((function t(e){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={Authorization:"Bearer "+uni.getStorageSync("token")},t.next=3,i.default.get("order/get",e,r);case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();e.getOrder=s;var c=function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={Authorization:"Bearer "+uni.getStorageSync("token")},t("log",r," at api/user-chat.js:32"),e.next=4,i.default.post("order",r,n);case 4:return a=e.sent,t("log","createOrder "+a.error_msg," at api/user-chat.js:34"),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();e.createOrder=c;var l=function(){var t=(0,a.default)(regeneratorRuntime.mark((function t(e){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={Authorization:"Bearer "+uni.getStorageSync("token")},i.default.setLoading(!1),t.next=4,i.default.post("chat/push",e,r);case 4:return n=t.sent,i.default.setLoading(!0),t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();e.pushMessage=l;var f=function(){var t=(0,a.default)(regeneratorRuntime.mark((function t(e){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r={Authorization:"Bearer "+uni.getStorageSync("token")},t.next=3,i.default.post("chat/create",e,r);case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();e.createChat=f;var p=function(){var t=(0,a.default)(regeneratorRuntime.mark((function t(e,r){var n,a,d,s,c,l,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={Authorization:"Bearer "+uni.getStorageSync("token")},t.next=3,i.default.get("chat/"+e,{},n);case 3:return a=t.sent,d={},a&&(s=r.id==a.from_user_id?a.to_user_id:a.from_user_id,c=o.default.gettime.gettime(new Date),l="",f=a.message_list,d={id:a.chatroom_id,fid:s,fromId:a.from_user_id,toId:a.to_user_id,afterTime:+new Date(a.afterTime),userpic:a.from_user_id==r.id?u.picUrl+a.to_user_pic:u.picUrl+a.from_user_pic,username:a.from_user_id==r.id?a.to_user_name:a.from_user_name,time:c,name:a.from_user_id==r.id?a.to_user:a.from_user,message:l,noreadnum:0,messages:f}),t.abrupt("return",d);case 7:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}();e.getChat=p}).call(this,r("0de9")["log"])},a5e2:function(t,e,r){var n=r("acf7");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=r("4f06").default;a("711faa56",n,!0,{sourceMap:!1,shadowMode:!1})},ace0:function(t,e,r){"use strict";r.r(e);var n=r("e3be"),a=r.n(n);for(var i in n)"default"!==i&&function(t){r.d(e,t,(function(){return n[t]}))}(i);e["default"]=a.a},acf7:function(t,e,r){var n=r("24fb");e=n(!1),e.push([t.i,'.tui-btn-primary[data-v-4c99c476]{background:#5677fc!important;color:#fff}.tui-shadow-primary[data-v-4c99c476]{box-shadow:0 %?10?% %?14?% 0 rgba(86,119,252,.2)}.tui-btn-danger[data-v-4c99c476]{background:#eb0909!important;color:#fff}.tui-shadow-danger[data-v-4c99c476]{box-shadow:0 %?10?% %?14?% 0 rgba(235,9,9,.2)}.tui-btn-warning[data-v-4c99c476]{background:#fc872d!important;color:#fff}.tui-shadow-warning[data-v-4c99c476]{box-shadow:0 %?10?% %?14?% 0 rgba(252,135,45,.2)}.tui-btn-green[data-v-4c99c476]{background:#35b06a!important;color:#fff}.tui-shadow-green[data-v-4c99c476]{box-shadow:0 %?10?% %?14?% 0 rgba(53,176,106,.2)}.tui-btn-blue[data-v-4c99c476]{background:#007aff!important;color:#fff}.tui-shadow-blue[data-v-4c99c476]{box-shadow:0 %?10?% %?14?% 0 rgba(0,122,255,.2)}.tui-btn-white[data-v-4c99c476]{background:#fff!important;color:#333!important}.tui-btn-gray[data-v-4c99c476]{background:#bfbfbf!important;color:#fff!important}.tui-btn-black[data-v-4c99c476]{background:#333!important;color:#fff!important}.tui-shadow-gray[data-v-4c99c476]{box-shadow:0 %?10?% %?14?% 0 hsla(0,0%,74.9%,.2)}.tui-hover-gray[data-v-4c99c476]{background:#f7f7f9!important}.tui-black-hover[data-v-4c99c476]{background:#555!important;color:#e5e5e5!important}\n\n/* button start*/.tui-btn[data-v-4c99c476]{width:100%;position:relative;border:0!important;border-radius:%?6?%;padding-left:0;padding-right:0;overflow:visible}.tui-btn[data-v-4c99c476]::after{content:"";position:absolute;width:200%;height:200%;-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:scale(.5) translateZ(0);transform:scale(.5) translateZ(0);box-sizing:border-box;left:0;top:0;border-radius:%?12?%;border:0}.tui-btn-white[data-v-4c99c476]::after{border:%?1?% solid #bfbfbf}.tui-white-hover[data-v-4c99c476]{background:#e5e5e5!important;color:#2e2e2e!important}.tui-dark-disabled[data-v-4c99c476]{opacity:.6!important;color:#fafbfc!important}.tui-dark-disabled-outline[data-v-4c99c476]{opacity:.5!important}.tui-gray-disabled[data-v-4c99c476]{background:#f3f3f3!important;color:#919191!important;box-shadow:none}.tui-outline-hover[data-v-4c99c476]{opacity:.5}.tui-primary-hover[data-v-4c99c476]{background:#4a67d6!important;color:#e5e5e5!important}.tui-primary-outline[data-v-4c99c476]::after{border:%?1?% solid #5677fc!important}.tui-primary-outline[data-v-4c99c476]{color:#5677fc!important;background:transparent}.tui-danger-hover[data-v-4c99c476]{background:#c80808!important;color:#e5e5e5!important}.tui-danger-outline[data-v-4c99c476]{color:#eb0909!important;background:transparent}.tui-danger-outline[data-v-4c99c476]::after{border:%?1?% solid #eb0909!important}.tui-warning-hover[data-v-4c99c476]{background:#d67326!important;color:#e5e5e5!important}.tui-warning-outline[data-v-4c99c476]{color:#fc872d!important;background:transparent}.tui-warning-outline[data-v-4c99c476]::after{border:1px solid #fc872d!important}.tui-green-hover[data-v-4c99c476]{background:#2d965a!important;color:#e5e5e5!important}.tui-green-outline[data-v-4c99c476]{color:#35b06a!important;background:transparent}.tui-green-outline[data-v-4c99c476]::after{border:%?1?% solid #35b06a!important}.tui-blue-hover[data-v-4c99c476]{background:#0062cc!important;color:#e5e5e5!important}.tui-blue-outline[data-v-4c99c476]{color:#007aff!important;background:transparent}.tui-blue-outline[data-v-4c99c476]::after{border:%?1?% solid #007aff!important}\n.tui-btn-gradual[data-v-4c99c476]{background:linear-gradient(90deg,#ff5926,#f00e2c)!important;color:#fff!important}.tui-shadow-gradual[data-v-4c99c476]{box-shadow:0 %?10?% %?14?% 0 rgba(235,9,9,.15)}\n.tui-gray-hover[data-v-4c99c476]{background:#a3a3a3!important;color:#898989}\n.tui-gradual-hover[data-v-4c99c476]{background:linear-gradient(90deg,#d74620,#cd1225)!important;color:#fff!important}\n.tui-gray-outline[data-v-4c99c476]{color:#999!important;background:transparent!important}.tui-white-outline[data-v-4c99c476]{color:#fff!important;background:transparent!important}.tui-black-outline[data-v-4c99c476]{background:transparent!important;color:#333!important}.tui-gray-outline[data-v-4c99c476]::after{border:%?1?% solid #ccc!important}.tui-white-outline[data-v-4c99c476]::after{border:1px solid #fff!important}.tui-black-outline[data-v-4c99c476]::after{border:1px solid #333!important}\n\n/*圆角 */.tui-fillet[data-v-4c99c476]{border-radius:%?50?%}.tui-btn-white.tui-fillet[data-v-4c99c476]::after{border-radius:%?98?%}.tui-outline-fillet[data-v-4c99c476]::after{border-radius:%?98?%}\n\n/*平角*/.tui-rightAngle[data-v-4c99c476]{border-radius:0}.tui-btn-white.tui-rightAngle[data-v-4c99c476]::after{border-radius:0}.tui-outline-rightAngle[data-v-4c99c476]::after{border-radius:0}',""]),t.exports=e},ae68:function(t,e,r){"use strict";r.r(e);var n=r("2400"),a=r.n(n);for(var i in n)"default"!==i&&function(t){r.d(e,t,(function(){return n[t]}))}(i);e["default"]=a.a},bff5:function(t,e,r){"use strict";r.r(e);var n=r("94bd"),a=r("d3a2");for(var i in a)"default"!==i&&function(t){r.d(e,t,(function(){return a[t]}))}(i);r("5194");var o,u=r("f0c5"),d=Object(u["a"])(a["default"],n["b"],n["c"],!1,null,"4c99c476",null,!1,n["a"],o);e["default"]=d.exports},c671:function(t,e,r){"use strict";var n=r("0633"),a=r.n(n);a.a},c6ae:function(t,e,r){"use strict";var n=r("c933"),a=r.n(n);a.a},c881:function(t,e,r){"use strict";(function(t){var n=r("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.needToOrderlist=e.getOrderDetail=void 0,r("96cf");var a=n(r("1da1")),i=n(r("4622")),o=(n(r("46ee")),r("13b4"),function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t("log","getOrderDetail"," at api/order-detail.js:9"),n={Authorization:"Bearer "+uni.getStorageSync("token")},e.next=4,i.default.get("order/"+r,{},n);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());e.getOrderDetail=o;var u=function(){var e=(0,a.default)(regeneratorRuntime.mark((function e(r){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t("log","needToOrderlist"," at api/order-detail.js:20"),n={Authorization:"Bearer "+uni.getStorageSync("token")},e.next=4,i.default.get("need/"+r+"/order",{},n);case 4:return a=e.sent,e.abrupt("return",a);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();e.needToOrderlist=u}).call(this,r("0de9")["log"])},c933:function(t,e,r){var n=r("934d");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=r("4f06").default;a("7806f6f5",n,!0,{sourceMap:!1,shadowMode:!1})},cca1:function(t,e,r){var n=r("24fb");e=n(!1),e.push([t.i,".user-chat-bottom[data-v-69ea4013]{position:fixed;bottom:0;left:0;right:0;height:%?120?%;padding:0 %?20?%;background:#fff;border-top:%?1?% solid #eee}.user-chat-bottom>uni-input[data-v-69ea4013]{flex:1;margin-right:%?20?%;padding:%?10?% %?20?%;border-radius:%?10?%;background:#f7f7f7}.user-chat-bottom>uni-view[data-v-69ea4013]{width:%?80?%;font-size:%?45?%}",""]),t.exports=e},cced:function(t,e,r){"use strict";r.r(e);var n=r("5b36"),a=r("d5b5");for(var i in a)"default"!==i&&function(t){r.d(e,t,(function(){return a[t]}))}(i);r("e0cb");var o,u=r("f0c5"),d=Object(u["a"])(a["default"],n["b"],n["c"],!1,null,"69ea4013",null,!1,n["a"],o);e["default"]=d.exports},d3a2:function(t,e,r){"use strict";r.r(e);var n=r("ec49"),a=r.n(n);for(var i in n)"default"!==i&&function(t){r.d(e,t,(function(){return n[t]}))}(i);e["default"]=a.a},d403:function(t,e,r){var n=r("cca1");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=r("4f06").default;a("44ab10be",n,!0,{sourceMap:!1,shadowMode:!1})},d5b5:function(t,e,r){"use strict";r.r(e);var n=r("2908"),a=r.n(n);for(var i in n)"default"!==i&&function(t){r.d(e,t,(function(){return n[t]}))}(i);e["default"]=a.a},d72c:function(t,e,r){"use strict";var n;r.d(e,"b",(function(){return a})),r.d(e,"c",(function(){return i})),r.d(e,"a",(function(){return n}));var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-uni-view",{staticClass:"user-chat-item animated fadeIn fast"},[t.item.gstime?r("v-uni-view",{staticClass:"user-chat-time u-f-ajc"},[t._v(t._s(t.item.gstime))]):t._e(),r("v-uni-view",{staticClass:"user-chat-list u-f",class:{"user-chat-me":t.item.isme}},[t.item.isme?t._e():r("v-uni-image",{attrs:{src:t.item.userpic,mode:"widthFix","lazy-load":!0},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.navUserInfo.apply(void 0,arguments)}}}),r("v-uni-view",{staticClass:"user-chat-list-body"},["text"==t.item.type?r("v-uni-text",[t._v(t._s(t.item.message))]):t._e(),"img"==t.item.type?r("v-uni-image",{attrs:{src:t.item.message,mode:"widthFix","lazy-load":!0}}):t._e()],1),t.item.isme?r("v-uni-image",{attrs:{src:t.item.userpic,mode:"widthFix","lazy-load":!0},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.navUserInfo.apply(void 0,arguments)}}}):t._e()],1)],1)},i=[]},da68:function(t,e,r){var n=r("2349");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=r("4f06").default;a("10d97893",n,!0,{sourceMap:!1,shadowMode:!1})},e0cb:function(t,e,r){"use strict";var n=r("d403"),a=r.n(n);a.a},e3be:function(t,e,r){"use strict";(function(t){var n=r("4ea4");r("e25e"),r("ac1f"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,r("96cf");var a=n(r("1da1")),i=n(r("5530")),o=n(r("cced")),u=n(r("46ee")),d=n(r("55fc")),s=r("26cb"),c=r("a34d"),l=r("7d2f"),f=(r("13b4"),n(r("e143")),r("c881")),p=r("20ce"),h={components:{userChatBottom:o.default,userChatList:d.default},computed:(0,i.default)((0,i.default)({},(0,s.mapState)(["chatList","userInfo","msgIndex","msgPage"])),(0,s.mapGetters)(["currentChatMsgs"])),data:function(){return{scrollTop:0,triggered:!1,index:-1,style:{contentH:0,itemH:0},list:[],cId:0,socket:null,fid:void 0,isShow:!1,show:!1,need:{need_id:0},order:{order_id:0,state:void 0},timer:null}},onShow:function(){this.isShow=!0},beforeDestroy:function(){this.isShow=!1,this.setIndex(-1),this.setMsgPage(1),this.clear()},onPullDownRefresh:function(){this.initdata()},onLoad:function(e){var r=this;return(0,a.default)(regeneratorRuntime.mark((function n(){var a,i,o,u,d,s,l,f,p,h,g;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.index&&(r.setIndex(parseInt(e.index)),r.index=e.index,r.chatList[r.msgIndex].name?(a=r.chatList[r.msgIndex].username+"（"+r.chatList[r.msgIndex].name+"）",uni.setNavigationBarTitle({title:a})):(i=r.chatList[r.msgIndex].username,uni.setNavigationBarTitle({title:i})),uni.setNavigationBarColor({frontColor:"#000000",backgroundColor:"#fffae1",animation:{duration:500,timingFunc:"easeInOut"}})),r.fid=e.fid,o=parseInt(e.fid),u=!0,e.index){n.next=34;break}d=0;case 6:if(!(d<r.chatList.length)){n.next=17;break}if(r.chatList[d].fid!==o){n.next=14;break}return r.index=d,r.setIndex(d),u=!1,r.chatList[r.msgIndex].name?(s=r.chatList[r.msgIndex].username+"（"+r.chatList[r.msgIndex].name+"）",uni.setNavigationBarTitle({title:s})):(l=r.chatList[r.msgIndex].username,uni.setNavigationBarTitle({title:l})),r.cId=r.chatList[d].id,n.abrupt("return");case 14:d++,n.next=6;break;case 17:if(!u){n.next=32;break}return r.fid=o,n.next=21,(0,c.createChat)({from_user_id:r.userInfo.id,to_user_id:parseInt(o),chatroom_name:""});case 21:return f=n.sent,n.next=24,(0,c.getChat)(f.id,r.userInfo);case 24:p=n.sent,t("log",p," at pages/user-chat/user-chat.vue:216"),r.cId=f.id,t("log",r.cId," at pages/user-chat/user-chat.vue:218"),r.setIndex(0),r.index=0,r.addChatList(p),p.name?(h=p.username+"（"+p.name+"）",uni.setNavigationBarTitle({title:h})):(g=p.username,uni.setNavigationBarTitle({title:g}));case 32:n.next=36;break;case 34:r.fid=r.chatList[e.index].fid,r.cId=r.chatList[e.index].id;case 36:r.initorder();case 37:case"end":return n.stop()}}),n)})))()},onReady:function(){this.getdata(),this.initdata(),this.pageToBottom(!0),this.initorder(),this.initdata()},onNavigationBarButtonTap:function(t){switch(t.index){case 0:this.goToUserInfo(this.chatList[this.msgIndex].fid);break}},watch:{currentChatMsgs:function(t){this.triggered||this.pageToBottom(!0)}},methods:(0,i.default)((0,i.default)({},(0,s.mapMutations)(["setChatMessage","setIsPaper","addChatList","setIndex","setMsgPage","addChatMessage","addNoreadMessage"])),{},{initdata:function(){var t=this;return(0,a.default)(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:try{r=uni.getSystemInfoSync(),n=200,t.style.contentH=r.windowHeight-uni.upx2px(n),uni.stopPullDownRefresh()}catch(a){}case 1:case"end":return e.stop()}}),e)})))()},refresh:function(){var t=this;this.timer=setInterval((function(){setTimeout(t.trym,0)}),5e3)},createOrderAndRefresh:function(){if(5===this.userInfo.type){var t={enterprise_id:this.userInfo.id,expert_id:this.fid,need_id:this.need.need_id};(0,c.createOrder)(t)}else if(4===this.userInfo.type){var e={enterprise_id:this.fid,expert_id:this.userInfo.id,need_id:this.need.need_id};(0,c.createOrder)(e)}this.initorder(),this.sendm("我已向您发起订单，需求名为："+this.need.title)},acceptOrderAndRefresh:function(){(0,l.acceptOrder)(this.userInfo.id,this.order.order_id),this.initorder(),this.sendm("我已接受您的订单，需求名为："+this.need.title)},rejectOrderAndRefresh:function(){(0,l.rejectOrder)(this.userInfo.id,this.order.order_id),this.initorder(),this.sendm("我已拒绝您的订单，需求名为："+this.need.title)},accomplishOrderAndRefresh:function(){if(5===this.userInfo.type){var t={enterprise_id:this.userInfo.id,expert_id:this.fid,need_id:this.need.need_id};(0,l.accomplishOrder)(t.enterprise_id,this.order.order_id)}else if(4===this.userInfo.type){var e={enterprise_id:this.fid,expert_id:this.userInfo.id,need_id:this.need.need_id};(0,l.accomplishOrder)(e.enterprise_id,this.order.order_id)}this.initorder(),this.sendm("我们的订单已完成，需求名为："+this.need.title)},initorder:function(){var e=this;return(0,a.default)(regeneratorRuntime.mark((function r(){var n,a,i,o,u,d;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(5!==e.userInfo.type){r.next=14;break}return n={enterprise_id:e.userInfo.id,expert_id:e.fid},r.next=4,(0,c.getContact)(n);case 4:if(a=r.sent,!a){r.next=11;break}return r.next=8,(0,p.getNeedDetail)(a.need_id);case 8:e.need=r.sent,r.next=12;break;case 11:e.need={need_id:0};case 12:r.next=26;break;case 14:if(4!==e.userInfo.type){r.next=26;break}return i={enterprise_id:e.fid,expert_id:e.userInfo.id},r.next=18,(0,c.getContact)(i);case 18:if(o=r.sent,!o){r.next=25;break}return r.next=22,(0,p.getNeedDetail)(o.need_id);case 22:e.need=r.sent,r.next=26;break;case 25:e.need={need_id:0};case 26:return u=4===e.userInfo.type?{enterprise_id:e.fid,expert_id:e.userInfo.id,need_id:e.need.need_id}:{enterprise_id:e.userInfo.id,expert_id:e.fid,need_id:e.need.need_id},r.next=29,(0,c.getOrder)(u);case 29:if(d=r.sent,t("log",d," at pages/user-chat/user-chat.vue:391"),!(d.order_id>0)){r.next=37;break}return r.next=34,(0,f.getOrderDetail)(d.order_id);case 34:e.order=r.sent,r.next=39;break;case 37:e.order.state=void 0,e.order.order_id=0;case 39:case"end":return r.stop()}}),r)})))()},sendm:function(t){var e=this;return(0,a.default)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:e.submit(t);case 1:case"end":return r.stop()}}),r)})))()},scrollTopHandle:function(){var t=this;this.triggered?setTimeout((function(){t.msgPage>t.currentChatMsgs.length/20&&uni.showToast({title:"没有更多消息了!",icon:"none"}),t.triggered=!1}),200):(this.triggered=!0,this.setMsgPage())},pageToBottom:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=uni.createSelectorQuery().in(this),n=r.selectAll(".chat-item");0!==this.currentChatMsgs.length&&this.$nextTick((function(){n.fields({size:!0},(function(r){if(r){if(e)for(var n=0;n<r.length;n++)t.style.itemH+=r[n].height;else t.style.itemH+=r[r.length-1].height;t.scrollTop=t.style.itemH>t.style.contentH?t.style.itemH:0}})).exec()}))},openmenu:function(){this.show?this.show=!1:this.show=!0},clear:function(){clearInterval(this.timer),this.timer=null},goToUserInfo:function(t){uni.navigateTo({url:"../../pages/user-space/user-space?uid="+t})},goToNeedDetail:function(t){uni.navigateTo({url:"../need-detail/detail?id="+t})},goToOrderDetail:function(t){uni.navigateTo({url:"../order-detail/order-detail?id="+t})},getdata:function(){this.chatList.length},submit:function(t){var e=this;return(0,a.default)(regeneratorRuntime.mark((function r(){var n,a,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=(new Date).getTime(),""!==t){r.next=4;break}return uni.showToast({title:"消息不能为空",icon:"none"}),r.abrupt("return");case 4:return r.next=6,(0,c.pushMessage)({cId:e.chatList[e.msgIndex].id,fromId:e.userInfo.id,toId:e.chatList[e.msgIndex].fid,content:t});case 6:if(a=r.sent,!a.code||0===a.code){r.next=10;break}return uni.showToast({title:"消息发送失败!",icon:"none"}),r.abrupt("return");case 10:i={fromId:e.userInfo.id,toId:e.fid,index:e.index,isme:!0,userpic:e.userInfo.userpic,type:"text",message:t,time:u.default.gettime.gettime(n),gstime:n,created_at:n},e.addChatMessage(i),e.pageToBottom(!0);case 13:case"end":return r.stop()}}),r)})))()}})};e.default=h}).call(this,r("0de9")["log"])},ec49:function(t,e,r){"use strict";r("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={name:"tuiButton",props:{type:{type:String,default:"primary"},shadow:{type:Boolean,default:!1},width:{type:String,default:"100%"},height:{type:String,default:"96rpx"},size:{type:Number,default:32},margin:{type:String,default:"0"},shape:{type:String,default:"square"},plain:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},disabledGray:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},openType:{type:String,default:""},index:{type:[Number,String],default:0}},methods:{handleClick:function(){if(this.disabled)return!1;this.$emit("click",{index:Number(this.index)})},bindgetuserinfo:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.detail,r=void 0===e?{}:e;this.$emit("getuserinfo",r)},getShadowClass:function(t,e,r){var n="";return e&&"white"!=t&&!r&&(n="tui-shadow-"+t),n},getDisabledClass:function(t,e,r){var n="";if(t&&"white"!=e){var a=this.disabledGray?"tui-gray-disabled":"tui-dark-disabled";n=r?"tui-dark-disabled-outline":a}return n},getShapeClass:function(t,e){var r="";return"circle"==t?r=e?"tui-outline-fillet":"tui-fillet":"rightAngle"==t&&(r=e?"tui-outline-rightAngle":"tui-rightAngle"),r},getHoverClass:function(t,e,r){var n="";return t||(n=r?"tui-outline-hover":"tui-"+(e||"primary")+"-hover"),n}}};e.default=n},f728:function(t,e,r){"use strict";var n=r("da68"),a=r.n(n);a.a},f857:function(t,e,r){"use strict";var n;r.d(e,"b",(function(){return a})),r.d(e,"c",(function(){return i})),r.d(e,"a",(function(){return n}));var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-uni-view",{staticClass:"tui-list-class tui-list-cell",class:[t.arrow?"tui-cell-arrow":"",t.arrow&&t.arrowRight?"":"tui-arrow-right",t.unlined?"tui-cell-unlined":"",t.lineLeft?"tui-line-left":"",t.lineRight?"tui-line-right":"",t.arrow&&t.arrowColor?"tui-arrow-"+t.arrowColor:"",t.radius?"tui-radius":""],style:{backgroundColor:t.backgroundColor,fontSize:t.size+"rpx",color:t.color,padding:t.padding},attrs:{"hover-class":t.hover?"tui-cell-hover":"","hover-stay-time":150},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleClick.apply(void 0,arguments)}}},[t._t("default")],2)},i=[]},fe6b:function(t,e,r){"use strict";r.r(e);var n=r("f857"),a=r("0b0b");for(var i in a)"default"!==i&&function(t){r.d(e,t,(function(){return a[t]}))}(i);r("f728");var o,u=r("f0c5"),d=Object(u["a"])(a["default"],n["b"],n["c"],!1,null,"54473b38",null,!1,n["a"],o);e["default"]=d.exports}}]);